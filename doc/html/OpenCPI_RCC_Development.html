<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
  <!-- This file was converted to xhtml by Writer2xhtml ver. 1.5.2. See http://writer2latex.sourceforge.net for more info. -->
  <head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <title>OCPI_ODT</title>
    <meta charset="UTF-8" />
    <meta content="" name="description" />
    <meta content="" name="keywords" />
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC" />
    <meta content="OCPI_ODT" name="DC.title" />
    <meta content="" name="DC.subject" />
    <meta content="" name="DC.description" />
    <meta content="James Kulp" name="DC.creator" />
    <meta content="2016-01-28T11:53:31.749472000" name="DC.date" />
    <meta content="en" name="DC.language" />
    <style media="all" type="text/css">
      body {font-family:Calibri,serif;font-size:13.333334px}
      span.Code {font-family:'Courier New',monospace;font-weight:bold;font-size:16.0px;background-color:transparent}
      a:link {font-family:Arial,sans-serif;font-size:16.0px;color:#0000ff;text-decoration:underline}
      a:visited {color:#800000;text-decoration:underline}
      a.Internet20link:link {font-family:Arial,sans-serif;font-size:16.0px;color:#0000ff;text-decoration:underline}
      a.Internet20link:visited {color:#800000;text-decoration:underline}
      p.Textbodyindent {margin-left:0;margin-right:0;margin-top:0;margin-bottom:9.331201px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-size:16.0px}
      p.Standard {margin-left:0;margin-right:0;margin-top:7.6703997px;margin-bottom:5.7408px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-size:16.0px}
      p.TableCode {margin-left:0;margin-right:0;margin-top:7.6703997px;margin-bottom:5.7408px;border:none;padding:0;text-align:left;font-family:'Courier New',monospace;font-weight:bold;font-size:14.666667px}
      p.TableHeading {margin-left:0;margin-right:0;margin-top:7.6703997px;margin-bottom:5.7408px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-weight:bold;font-size:16.0px}
      p.Code {margin-left:24.0px;margin-right:0;margin-top:4.0032px;margin-bottom:0;border:none;padding:0;text-indent:0;text-align:left;font-family:'Courier New',monospace;font-weight:bold;font-size:14.666667px}
      p.TableContents {margin-left:0;margin-right:0;margin-top:7.6703997px;margin-bottom:5.7408px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-size:14.666667px}
      p.Contents3 {margin-left:32.016px;margin-right:0;margin-top:0;margin-bottom:0;border:none;padding:0;text-indent:0;text-align:left;font-family:Calibri,serif;font-size:14.666667px}
      p.ContentsHeading {page-break-before:always;margin-left:0;margin-right:0;margin-top:15.984px;margin-bottom:8.016px;border:none;padding:0;text-align:center;font-family:'Liberation Sans',sans-serif;font-weight:bold;font-size:16.0px}
      p.Textbody {margin-left:0;margin-right:0;margin-top:0;margin-bottom:9.331201px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-size:16.0px}
      p.Contents2 {margin-left:15.984px;margin-right:0;margin-top:0;margin-bottom:0;border:none;padding:0;text-indent:0;text-align:left;font-family:Calibri,serif;font-weight:bold;font-size:14.666667px}
      p.ListBullet {margin-left:38.4px;margin-right:0;margin-top:7.6703997px;margin-bottom:5.7408px;border:none;padding:0;text-indent:-19.2px;text-align:left;font-family:Arial,serif;font-size:16.0px}
      p.Contents1 {margin-left:0;margin-right:0;margin-top:8.016px;margin-bottom:0;border:none;padding:0;text-align:left;font-family:Calibri,serif;font-weight:bold;font-size:16.0px}
      p.Body {margin-left:0;margin-right:0;margin-top:7.6703997px;margin-bottom:5.7408px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-size:16.0px}
      p.ListBullet2 {margin-left:48.0px;margin-right:0;margin-top:7.6703997px;margin-bottom:5.7408px;border:none;padding:0;text-indent:-24.0px;text-align:left;font-family:Arial,serif;font-style:italic;font-size:16.0px}
      p.caption {margin-left:0;margin-right:0;margin-top:8.016px;margin-bottom:5.328px;border:none;padding:0;text-align:center;font-family:Arial,serif;font-weight:bold;font-size:16.0px;color:#008080}
      h1 {page-break-before:always;margin-left:0;margin-right:0;margin-top:15.984px;margin-bottom:4.0032px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-weight:bold;font-size:18.666668px;clear:left}
      h2 {page-break-before:always;margin-left:0;margin-right:0;margin-top:15.984px;margin-bottom:4.0032px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-style:italic;font-weight:bold;font-size:16.0px;clear:left}
      h3 {margin-left:0;margin-right:0;margin-top:15.984px;margin-bottom:4.0032px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-style:italic;font-size:16.0px;clear:left}
      h4 {margin-left:0;margin-right:0;margin-top:15.984px;margin-bottom:4.0032px;border:none;padding:0;text-align:left;font-family:Arial,serif;font-style:italic;font-size:16.0px;clear:left}
      .listlevel1WWNum32 {margin-top:0;margin-bottom:0;list-style-type:disc;clear:left}
      .listlevel2WWNum32 {margin-top:0;margin-bottom:0;list-style-type:bullet;clear:left}
      .listlevel3WWNum32 {margin-top:0;margin-bottom:0;list-style-type:square;clear:left}
      .listlevel4WWNum32 {margin-top:0;margin-bottom:0;list-style-type:disc;clear:left}
      .listlevel5WWNum32 {margin-top:0;margin-bottom:0;list-style-type:bullet;clear:left}
      .listlevel6WWNum32 {margin-top:0;margin-bottom:0;list-style-type:square;clear:left}
      .listlevel7WWNum32 {margin-top:0;margin-bottom:0;list-style-type:disc;clear:left}
      .listlevel8WWNum32 {margin-top:0;margin-bottom:0;list-style-type:bullet;clear:left}
      .listlevel9WWNum32 {margin-top:0;margin-bottom:0;list-style-type:square;clear:left}
      .listlevel1WWNum18 {margin-top:0;margin-bottom:0;list-style-type:disc;clear:left}
      .listlevel2WWNum18 {margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left}
      .listlevel3WWNum18 {margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left}
      .listlevel4WWNum18 {margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left}
      .listlevel5WWNum18 {margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left}
      .listlevel6WWNum18 {margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left}
      .listlevel7WWNum18 {margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left}
      .listlevel8WWNum18 {margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left}
      .listlevel9WWNum18 {margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left}
    </style>
  </head>
  <body dir="ltr">
    <p class="Standard" dir="ltr" style="text-align:center"><span style="font-weight:bold;font-size:37.333336px">OpenCPI<br />RCC Development<br />Guide</span></p>
    <p class="Standard" dir="ltr" style="text-align:center;font-size:18.666668px"> </p>
    <p class="Standard" dir="ltr" style="font-size:18.666668px"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr" style="font-weight:bold;font-size:29.333334px;color:#ff0000">DRAFT/Incomplete for review</p>
    <p class="Standard" dir="ltr" style="font-weight:bold;color:#ff0000"> </p>
    <p class="Standard" dir="ltr" style="font-weight:bold;color:#ff0000"> </p>
    <p class="Standard" dir="ltr" style="font-weight:bold;color:#ff0000"> </p>
    <p class="Standard" dir="ltr" style="font-weight:bold;color:#ff0000"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr"> </p>
    <p class="Standard" dir="ltr" style="page-break-before:always;margin-top:0;margin-bottom:0;text-align:center;font-style:italic">Revision History</p>
    <table cellspacing="0" dir="ltr" id="Table1table" style="margin-top:0;margin-bottom:0;margin-left:-1.7376001px;margin-right:auto;width:623.73114px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td style="border:1.0px solid #00000a;padding-top:0;padding-bottom:0;padding-left:7.9968004px;padding-right:7.6703997px;vertical-align:top;width:44.003204px">
            <p class="Standard" dir="ltr" style="text-align:center;font-weight:bold;font-size:10.666667px">Revision</p>
          </td>
          <td style="border:1.0px solid #00000a;padding-top:0;padding-bottom:0;padding-left:7.9968004px;padding-right:7.6703997px;vertical-align:top;width:448.9312px">
            <p class="Standard" dir="ltr" style="text-align:center;font-weight:bold;font-size:10.666667px">Description of Change</p>
          </td>
          <td style="border:1.0px solid #00000a;padding-top:0;padding-bottom:0;padding-left:7.9968004px;padding-right:7.6703997px;vertical-align:top;width:77.795204px">
            <p class="Standard" dir="ltr" style="text-align:center;font-weight:bold;font-size:10.666667px">Date</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #00000a;padding-top:0;padding-bottom:0;padding-left:7.9968004px;padding-right:7.6703997px;vertical-align:top;width:44.003204px">
            <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0;font-size:9.333334px">0.1</p>
          </td>
          <td style="border:1.0px solid #00000a;padding-top:0;padding-bottom:0;padding-left:7.9968004px;padding-right:7.6703997px;vertical-align:top;width:448.9312px">
            <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0"><span style="font-size:9.333334px">Initial, from earlier doc sources</span></p>
          </td>
          <td style="border:1.0px solid #00000a;padding-top:0;padding-bottom:0;padding-left:7.9968004px;padding-right:7.6703997px;vertical-align:top;width:77.795204px">
            <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0"><span style="font-size:9.333334px">2015-10-31</span></p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.0px solid #00000a;border-left:1.0px solid #00000a;border-right:1.0px solid #00000a;padding-top:0;padding-bottom:0;padding-left:7.9968004px;padding-right:7.6703997px;vertical-align:top;width:44.003204px">
            <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0;font-size:9.333334px">0.9</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #00000a;border-left:1.0px solid #00000a;border-right:1.0px solid #00000a;padding-top:0;padding-bottom:0;padding-left:7.9968004px;padding-right:7.6703997px;vertical-align:top;width:448.9312px">
            <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0;font-size:9.333334px">Add all C++ content slave/proxy content, references to CDG</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #00000a;border-left:1.0px solid #00000a;border-right:1.0px solid #00000a;padding-top:0;padding-bottom:0;padding-left:7.9968004px;padding-right:7.6703997px;vertical-align:top;width:77.795204px">
            <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0;font-size:9.333334px">2016-01-27</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0"> </p>
    <p class="Contents1" dir="ltr" style="page-break-before:always;text-align:center">Table of Contents</p>
    <div id="TableofContents1">
      <p class="ContentsHeading" dir="ltr"></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">1 </span><a href="#toc0">Introduction</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">1.1 </span><a href="#toc1">References</a></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">2 </span><a href="#toc2">Overview</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">2.1 </span><a href="#toc3">Descriptive XML for RCC Workers.</a></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">3 </span><a href="#toc4">XML description files (OWD) for RCC workers.</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">3.1 </span><a href="#toc5">Attributes of a top-level RCCWorker element</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">3.1.1 </span><a href="#toc6">Name attribute</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">3.1.2 </span><a href="#toc7">Language attribute</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">3.1.3 </span><a href="#toc8">ControlOperations attribute</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">3.1.4 </span><a href="#toc9">Slave attribute</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">3.1.5 </span><a href="#toc10">ExternMethods attribute (C language)</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">3.2 </span><a href="#toc11">Attributes of Port Elements in the OWD</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">3.2.1 </span><a href="#toc12">Name attribute</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">3.2.2 </span><a href="#toc13">MinBufferCount attribute</a></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">4 </span><a href="#toc14">The RCC Worker Interface</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">4.1 </span><a href="#toc15">Worker methods:  called by the container, implemented by the worker.</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.1.1 </span><a href="#toc16">RCCWorker Structure Type – C language only</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.1.2 </span><a href="#toc17">RCCResult Enumeration Type (C and C++)</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.1.3 </span><a href="#toc18">initialize — worker method</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.1.4 </span><a href="#toc21">start — worker method</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.1.5 </span><a href="#toc24">stop — worker method</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.1.6 </span><a href="#toc27">release — worker method</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.1.7 </span><a href="#toc30">afterConfigure — worker method</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.1.8 </span><a href="#toc33">beforeQuery — worker method</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.1.9 </span><a href="#toc36">run — worker method</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">4.2 </span><a href="#toc40">Container methods, called by the worker.</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.2.1 </span><a href="#toc41">time/getTime — container method</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.2.2 </span><a href="#toc44">setError — container method</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.2.3 </span><a href="#toc47">getRunCondition — container method — C++ Language only</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.2.4 </span><a href="#toc50">setRunCondition — container method — C++ Language only</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.2.5 </span><a href="#toc53">The RCC::RunCondition C++ class</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">4.3 </span><a href="#toc54">Port Management Data Members and Methods</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.3.1 </span><a href="#toc55">advance — port method (C++), container method (C)</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.3.2 </span><a href="#toc58">hasBuffer — query a port for whether it has a current buffer-to-release</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.3.3 </span><a href="#toc61">isConnected — query a port for being connected</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.3.4 </span><a href="#toc64">request — port method (C++), container method (C)</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.3.5 </span><a href="#toc67">send — send an input buffer on an output port</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.3.6 </span><a href="#toc70">setDefaultLength — set the default message length at an output port</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.3.7 </span><a href="#toc73">setDefaultOpCode — set the default opcode at an output port</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.3.8 </span><a href="#toc76">take — port method (C++), container method (C)</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">4.4 </span><a href="#toc79">Buffer Management Data Members and Methods</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.1 </span><a href="#toc80">checkLength — check size of the buffer</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.2 </span><a href="#toc83">data — access the raw contents of the buffer</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.3 </span><a href="#toc86">length — retrieve the length of the message in a buffer – C++ only</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.4 </span><a href="#toc89">maxLength — retrieve the maximum available space in the buffer.</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.5 </span><a href="#toc92">opCode — retrieve the opCode of the message in a buffer — C++ only</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.6 </span><a href="#toc95">release — release a buffer</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.7 </span><a href="#toc98">setInfo — set the metadata associated with a buffer — C++ only</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.8 </span><a href="#toc101">setLength — set the length of the message in a buffer — C++ only</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.9 </span><a href="#toc104">setOpCode — set the opCode for the message in a buffer — C++ only</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.4.10 </span><a href="#toc107">topLength — retrieve the size of the single sequence in a message — C++ only</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">4.5 </span><a href="#toc110">Accessing the Contents of Messages</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">4.6 </span><a href="#toc111">Property Access Notifications</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">4.7 </span><a href="#toc112">Controlling Slave Workers from Proxies (C++ only)</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">4.8 </span><a href="#toc113">Worker Dispatch Structures — C Language only</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">4.8.1 </span><a href="#toc114">RCCDispatch Structure Type</a></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">5 </span><a href="#toc115">Code Generation for RCC Workers</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">5.1 </span><a href="#toc116">Namespace Management</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">5.2 </span><a href="#toc117">Generated Data Types</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">5.2.1 </span><a href="#toc118">The enumeration constants for the worker’s ports</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">5.2.2 </span><a href="#toc119">The properties structure type</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">5.2.3 </span><a href="#toc120">Structures for Message Payloads (C only)</a></p>
      <p class="Contents3" dir="ltr"><span class="SectionNumber">5.2.4 </span><a href="#toc121">Worker Base Class (C++ only)</a></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">6 </span><a href="#toc122">RCC Local Services</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">6.1 </span><a href="#toc123">RCC Local Services AEP as a small subset of POSIX and ISO-C.</a></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">7 </span><a href="#toc124">Summary of OpenCPI RCC authoring model</a></p>
      <p class="Contents2" dir="ltr"><span class="SectionNumber">7.1 </span><a href="#toc125">Worker code example</a></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">8 </span><a href="#toc128">Glossary</a></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">9 </span><a href="#toc129">References</a></p>
      <p class="Contents1" dir="ltr"><span class="SectionNumber">10 </span><a href="#toc130">List of Abbreviations and Acronyms</a></p>
    </div>
    <h1 dir="ltr" id="toc0"><span class="SectionNumber">1 </span><a id="Toc144999751"></a><a id="Toc57540727"></a><a id="RefHeading10151060509377"></a><a id="Toc57540730"></a>Introduction</h1>
    <p class="Body" dir="ltr">This document specifies the OpenCPI RCC authoring model and describes how to write RCC workers, in C or C++.  The <span style="font-family:Arial,serif;font-size:16.0px">term “RCC” is defined as “Resource-Constrained C Language”.  This model is based on the C language and makes most design choices to minimize resources and thus to be appropriate for resource-constrained embedded systems.  DSP processors with on-chip memories, micro-controllers, and some multi-core processors are natural targets for this authoring model.  Of course the RCC model is a perfectly appropriate model for any general-purpose processor with a C compiler, when the developer is comfortable with the constraints of the C language.</span></p>
    <p class="Body" dir="ltr" style="font-family:Arial,serif;font-size:16.0px">This document also describes a C++ variant of this authoring model that takes advantage of the expressive power of the C++ language (which usually results in fewer SLOC – Source Lines of Code), at a modest cost of increased memory footprint.  Both the C and C++ language variants are considered to be based on this one (RCC) authoring model since so many concepts and details are common.</p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,serif;font-size:16.0px">This specification is based on the authoring model concept as defined in the OpenCPI Component Development Guide.  That document introduces key concepts for all authoring models, including the configuration and lifecycle model of components, and the software execution model for most authoring models targeting general purpose software platforms (rather than FPGA or similar).</span></p>
    <p class="Body" dir="ltr" style="font-family:Arial,serif;font-size:16.0px">That document is a prerequisite for this one.</p>
    <p class="Body" dir="ltr">As with all authoring models, this model is intended to coexist and interoperate with the other existing models that are more appropriate for other processing technologies such as GPUs (the OCL authoring model), and FPGAs (the HDL authoring model).  Other models and any unique aspects to their associated development workflow, are described in their own documents.</p>
    <h2 dir="ltr" id="toc1"><span class="SectionNumber">1.1 </span><a id="RefHeading110681972665394"></a>References</h2>
    <p class="Body" dir="ltr" style="font-family:Arial,serif;font-size:16.0px">This document depends on several others.  Primarily, it depends on the “OpenCPI Component Development Guide”, which describes concepts and definitions common to all OpenCPI authoring models.  Since this RCC authoring model is based on the C language (specifically C90: ISO/IEC 9899:1990), it also depends on the ISO-C language reference manual and associated libraries.  The exceptions to the C90 basis are the use of &lt;stdint.h&gt; from C99.  The C++ authoring model is based on the language as defined in XXX, prior to Cxx11.</p>
    <p class="caption" dir="ltr" style="margin-left:0;margin-right:0;margin-top:8.016px;margin-bottom:5.328px;text-indent:0;text-align:center"><a id="Ref58813963"></a><span style="font-family:Arial,serif;font-weight:bold;font-size:16.0px;color:#008080">Table <a id="seqrefTable0">1</a> - Table of Reference Documents</span></p>
    <table cellspacing="0" dir="ltr" id="Table2table" style="margin-top:0;margin-bottom:0;margin-left:-1.2px;margin-right:auto;width:562.80005px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:middle;width:193.53279px">
            <p class="TableHeading" dir="ltr">Title</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:middle;width:94.0px">
            <p class="TableHeading" dir="ltr">Published By</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:middle;width:269.2672px">
            <p class="TableHeading" dir="ltr">Link</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:middle;width:193.53279px">
            <p class="TableContents" dir="ltr">OpenCPI Component Development Guide</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:middle;width:94.0px">
            <p class="TableContents" dir="ltr"><a class="Internet20link" href="http://opencpi.org/"><span style="font-family:Arial,serif;font-size:16.0px;color:#0000ff;text-decoration:underline">OpenCPI</span></a></p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:middle;width:269.2672px">
            <p class="TableContents" dir="ltr"><span style="font-family:Arial,serif;font-size:16.0px;color:#0000ff;text-decoration:underline">githubURL</span></p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:middle;width:193.53279px">
            <p class="TableContents" dir="ltr">ISO C Language Specification</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:middle;width:94.0px">
            <p class="TableContents" dir="ltr"><a class="Internet20link" href="http://www.iso.org/c90"><span style="font-family:Arial,serif;font-size:16.0px;color:#0000ff;text-decoration:underline">C Language</span></a></p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:middle;width:269.2672px">
            <p class="TableContents" dir="ltr"><span style="font-family:Arial,serif;font-size:16.0px">Public URL: </span><a class="Internet20link" href="http://www.iso.org/">http://www.iso.org</a><span style="font-family:Arial,serif;font-size:16.0px;color:#0000ff;text-decoration:underline">/c90</span><span style="font-family:Arial,serif;font-size:16.0px">   </span></p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding:0;vertical-align:middle;width:193.53279px">
            <p class="TableContents" dir="ltr">ISO C++ Language Specification</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding:0;vertical-align:middle;width:94.0px">
            <p class="TableContents" dir="ltr">C++</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding:0;vertical-align:middle;width:269.2672px">
            <p class="TableContents" dir="ltr">Pre cxx11 C++</p>
          </td>
        </tr>
      </tbody>
    </table>
    <h1 dir="ltr" id="toc2"><span class="SectionNumber">2 </span><a id="Toc270018416"></a><a id="RefHeadingToc53181067000368"></a>Overview</h1>
    <p class="Body" dir="ltr">RCC workers are hosted in a <span style="font-style:italic">container</span>, which is responsible for (1) loading, executing, controlling, and configuring the worker, (2) effecting data movement to and from the data ports of the worker, and (3) providing interfaces for the local services available to RCC workers. </p>
    <p class="Body" dir="ltr">When RCC workers are collocated, the container can make use of local zero-copy approaches to move data between them.  For connections between workers in <span style="font-style:italic">different</span> containers, the containers move data between each other using some common data transport mechanism.  Containers make use of a default data transport between the two devices unless explicitly configured to do otherwise. </p>
    <p class="Body" dir="ltr">The OpenCPI Component Development Guide contains sections for the general introduction to the control plane functionality of workers and containers, followed by the general execution model of software-based workers.  The specifics of the RCC authoring model are included here, consisting of:</p>
    <ul class="listlevel1WWNum32">
      <li>
        <p class="ListBullet" dir="ltr"><span style="font-style:italic;font-weight:bold">container-to-worker interfaces:</span>  how the container calls the worker’s entry points</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr"><span style="font-style:italic;font-weight:bold">worker-to-container interfaces:</span>  how the worker calls the container’s entry points</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr"><span style="font-style:italic;font-weight:bold">the local services:</span>  how the worker uses local services and which ones are available.</p>
      </li>
    </ul>
    <h2 dir="ltr" id="toc3"><span class="SectionNumber">2.1 </span><a id="RefHeading10572140039662"></a><a id="Toc270018429"></a>Descriptive XML for RCC Workers.</h2>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">As with other authoring models, the act of creating a component implementation (a.k.a. authoring a worker), includes writing source code as well as specifying certain characteristics of the implementation in a separate XML file.  This XML file is called the OWD (for </span><span style="font-weight:bold;font-size:16.0px;text-decoration:underline">O</span><span style="font-size:16.0px">penCPI </span><span style="font-weight:bold;font-size:16.0px;text-decoration:underline">W</span><span style="font-size:16.0px">orker </span><span style="font-weight:bold;font-size:16.0px;text-decoration:underline">D</span><span style="font-size:16.0px">escription).  It describes any non-default constraints or behavior of this particular component implementation, and has attributes and information that are specific to the authoring model.  The two items that all OWDs must specify is the component specification (OCS) being implemented, and the authoring model being used.  The OWD aspects that are common to all authoring models are described in the OpenCPI Component Development Guide.</span></p>
    <p class="Body" dir="ltr">The model name for the RCC authoring model is “RCC”.  The languages supported are C and C++.  The top level XML element for the OWD for RCC workers is <span class="Code">RCCWorker</span>.  The details of the OWD for RCC workers is described below in section 4.</p>
    <h1 dir="ltr" id="toc4"><span class="SectionNumber">3 </span><a id="Toc270018448"></a><a id="RefHeading15951517827571"></a>XML description files (OWD) for RCC workers.</h1>
    <p class="Body" dir="ltr">This section describes the format and structure of the RCC OWD:  the XML document that refers to or includes a Component Specification (OCS), and which specifies the implementation-specific aspects of the worker.  The OpenCPI Component Development Guide defines aspects common to all OWDs.  This section defines the aspects of the RCC OWD – specific to RCC workers.  The top level XML element for a RCC worker is RCCWorker.  If all defaults are used, the entire OWD for an RCC worker can be:</p>
    <p class="Code" dir="ltr">&lt;RCCWorker spec='myspec'/&gt;</p>
    <p class="Body" dir="ltr">The RCCWorker XML element contains information provided by someone creating an RCC worker based on a component specification (OCS).  This OWD includes or references an OCS, and then describes implementation information about this particular RCC implementation of that OCS.  Thus the RCCWorker element must either include as a child element a complete ComponentSpec, or include one by reference, using the “spec” attribute of the top-level element.  For example, the “vsadd” implementation of the “vsadd-spec” OCS would reference the component specification this way:</p>
    <p class="Code" dir="ltr">&lt;RCCWorker spec=”vsadd-spec”<br />	---other attributes---<br />	&gt;<br />	---other child elements---<br />&lt;/RCCWorker&gt;</p>
    <p class="Body" dir="ltr">The RCCWorker follows the specification of OWDs in general as specified elsewhere.  This section only defines the aspects of the RCC OWD (RCCWorker) that are <span style="font-style:italic">not</span> common to all OWDs.</p>
    <h2 dir="ltr" id="toc5" style="page-break-before:always"><span class="SectionNumber">3.1 </span><a id="Toc211781115"></a><a id="Toc211780966"></a><a id="RefHeading15953517827571"></a><a id="Toc270018449"></a>Attributes of a top-level RCCWorker element</h2>
    <h3 dir="ltr" id="toc6"><span class="SectionNumber">3.1.1 </span><a id="Toc270018450"></a><a id="Toc211781120"></a><a id="RefHeading15955517827571"></a><a id="Toc211781116"></a>Name attribute</h3>
    <p class="Body" dir="ltr">The “Name” attribute of the component implementation is used to generate the programming language name of the worker (e.g. used in the name of and the contents of the RCC-specific generated header file).  When not specified (the common case) the implementation name defaults to the name of the OWD file itself, without directories or extensions.</p>
    <h3 dir="ltr" id="toc7"><span class="SectionNumber">3.1.2 </span><a id="RefHeading10632140039662"></a><a id="Toc270018451"></a>Language attribute</h3>
    <p class="Body" dir="ltr">The “Language” attribute of the component implementation for RCC workers should have the value “c” or “c++”.  The default is “c”.</p>
    <h3 dir="ltr" id="toc8"><span class="SectionNumber">3.1.3 </span><a id="RefHeading10634140039662"></a><a id="Toc270018452"></a>ControlOperations attribute</h3>
    <p class="Body" dir="ltr">If not specified, no control operation methods are implemented by the worker (only the <span class="Code">run</span> method).  This information is used in the generation of the implementation skeleton to provide stubs for the specified control operation implementations.  It is also stored in the runtime metadata associated with the worker, which allows the runtime system to avoid invoking control operations that have no implementation.  This attribute is common to all OWDs.</p>
    <h3 dir="ltr" id="toc9"><span class="SectionNumber">3.1.4 </span><a id="RefHeadingToc80351067000368"></a>Slave attribute</h3>
    <p class="Standard" dir="ltr">This attribute indicates that this worker is a proxy for another worker, and that other worker is named as the string value of this attribute.  This attribute is only supported for C++.  The name of the slave worker may have a package prefix (with periods) if the slave worker is not in the same namespace as this worker.  The slave worker name must include the authoring model suffix.  An example is:</p>
    <p class="Code" dir="ltr">&lt;RCCWorker language='c++' slave='ocpi.devices.xyz_adc.hdl'/&gt;</p>
    <p class="Standard" dir="ltr">This would indicate that this worker is a proxy for the HDL worker named <span class="Code">xyz_adc</span>, in the <span class="Code">ocpi.devices</span> package name scope.</p>
    <h3 dir="ltr" id="toc10"><span class="SectionNumber">3.1.5 </span><a id="RefHeading57792638251233"></a>ExternMethods attribute (C language)</h3>
    <p class="Body" dir="ltr">This String attribute is used (when set to true), in the cases where the methods of the worker (whose addresses are placed in the RCCDispatch structure) should have external linkage scope rather than be local to the file (i.e. declared “static”).  In this case, the string value of this attribute is used as the prefix to those external function names, rather than just being file-scoped static functions whose names are simply the method names (e.g. “initialize”, “start”, “run”, etc.).</p>
    <h2 dir="ltr" id="toc11" style="page-break-before:always"><span class="SectionNumber">3.2 </span><a id="Toc270018453"></a><a id="Toc211781121"></a><a id="Toc211780968"></a><a id="RefHeading10636140039662"></a>Attributes of Port Elements in the OWD</h2>
    <p class="Body" dir="ltr">The <span class="Code">port</span> child element of the <span class="Code">RCCWorker</span> specifies information about a data port specified in the OCS.  It references an OCS <span class="Code">port</span> (or <span class="Code">dataInterfaceSpec</span>) element by its <span class="Code">Name</span> attribute.  Thus the <span class="Code">Name</span> attribute of the <span class="Code">Port</span> element must match the <span class="Code">Name</span> attribute of a <span class="Code">Port</span> or <span class="Code">DataInterfaceSpec</span> element of the <span class="Code">ComponentSpec</span>.  The <span class="Code">Port</span> element adds implementation-specific information about the port initially defined in that ComponentSpec.</p>
    <p class="Body" dir="ltr">A number of attributes available for the <span class="Code">port</span> element are common to all authoring models and are described in the Component Development Guide.  These are usually used to override attributes inferred from the protocol associated with the data port.</p>
    <h3 dir="ltr" id="toc12"><span class="SectionNumber">3.2.1 </span><a id="Toc270018454"></a><a id="RefHeading10638140039662"></a>Name attribute</h3>
    <p class="Body" dir="ltr">This attribute specifies the name used to reference the <span class="Code">Port</span> or <span class="Code">DataInterfaceSpec</span> element in the <span class="Code">ComponentSpec</span> (OCS).</p>
    <h3 dir="ltr" id="toc13"><span class="SectionNumber">3.2.2 </span><a id="RefHeading10640140039662"></a><a id="Toc270018455"></a>MinBufferCount attribute</h3>
    <p class="Body" dir="ltr">This numeric attribute specifies the minimum number of message buffers required by the worker for a port.  The Worker Interface allows the worker code (typically in the <span class="Code">run</span> method) to “take” a buffer from a port, and ask for a new buffer for that port while retaining ownership of the previous buffer from that port.  This behavior requires that the infrastructure provide at least 2 buffers for that port.</p>
    <p class="Body" dir="ltr">Thus this attribute informs the infrastructure as to the minimum buffering requirements of the worker implementation for that port.  The default is 1.<span style="font-style:italic">  This attribute should not be used to “tune” the buffer count for performance but only specify the actual minimum requirements for the correct functioning of the worker.</span></p>
    <h1 dir="ltr" id="toc14"><span class="SectionNumber">4 </span><a id="RefHeading10574140039662"></a><a id="Toc270018430"></a><span style="font-weight:bold">The RCC Worker Interface</span></h1>
    <p class="Body" dir="ltr">This section defines the interface between the worker and its container:  the API for this authoring model.  This document uses the term “worker method” as shorthand and language-neutral term for what is a “member function” in C++ or a worker entry point function in C.  The methods in C++ have an implicit “<span class="Code">this</span>” argument that is hidden by the language.  In RCC C language workers,  the first argument to all worker methods is an explicit “<span class="Code">self</span>” argument that is a pointer to a structure that contains context and state information for the worker.  When discussing a worker's runtime behavior, the term “<span style="font-style:italic">worker</span>” is sometimes used as a runtime <span style="font-style:italic">instance</span> of the worker rather than the source code that is written for the worker as a component implementation.</p>
    <p class="Body" dir="ltr">RCC workers must avoid the prefixes “OCPI” and “RCC” for compile-time constants and types since they are used automatically by this authoring model.  All defined data types for the RCC authoring model use the common prefix “RCC”.  All macros are upper case, and all data types are capitalized and mixed (camel) case.</p>
    <p class="Body" dir="ltr">The worker interface (its methods) consists of control operation methods whose behavior is defined in the “Control Plane Introduction” section of the OpenCPI Component Development Guide, plus an additional <span style="font-family:&apos;Courier New&apos;;font-style:italic;font-weight:bold">run</span> method that supports the event-driven execution model defined in the “Software Execution Model” of that same document.  The <span style="font-family:&apos;Courier New&apos;;font-style:italic;font-weight:bold">run</span> method is the only required method.  All the other methods are optional.  All processing of the worker occurs in the context of these methods.</p>
    <p class="Body" dir="ltr">The interface uses several basic integer types consistent with their CORBA C/C++<!-- I changed RCCBoolean and RCCOrdinal types to be consistent with previous RC doc – rather than the OCL doc.
OCLBoolean and OCLOrdinal are unint32_t
Arlan Pool
September 25, 2014 5:38 PM --> language mapping, to provide some compiler independence.  The integer types are defined using the ISO C 99 <span class="Code">&lt;stdint.h&gt;</span> types.  These basic types are:  <span class="Code">uint8_t</span>, <span class="Code">uint16_t</span> and <span class="Code">uint32_t</span>.  The type <span class="Code">RCCBoolean</span> is aliased to <span class="Code">uint8_t</span>, to be consistent with the defined size in property space and message content layouts.  The <span class="Code">RCCOrdinal</span> type is an alias for <span class="Code">uint16_t</span>, and is used when ordinals are required (ports, operations, exceptions, properties).</p>
    <p class="Body" dir="ltr">There are two categories of methods:</p>
    <ul class="listlevel1WWNum18">
      <li>
        <p class="ListBullet" dir="ltr" style="margin-left:24.0px;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:-24.0px;text-align:left;font-family:Arial,sans-serif"><span style="font-style:italic;font-weight:bold;font-size:16.0px">Worker methods</span><span style="font-style:italic;font-size:16.0px"> that represent functionality of the worker, to be called by the container, and which may have default implementations.  These include the “run” method, and the lifecycle control operation methods.</span></p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr" style="margin-left:24.0px;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:-24.0px;text-align:left;font-family:Arial,sans-serif"><span style="font-style:italic;font-weight:bold;font-size:16.0px">Container methods</span><span style="font-style:italic;font-size:16.0px"> that represent functionality of the container, to be called by the worker, such as changing run conditions, and accessing ports and buffers.  All C language container methods are dispatched through function pointers in the </span><span class="Code"><span style="font-style:italic">container</span></span><span style="font-style:italic;font-size:16.0px"> member of the </span><span class="Code"><span style="font-style:italic">RCCWorker</span></span><span style="font-style:italic;font-size:16.0px"> structure.</span></p>
      </li>
    </ul>
    <p class="Body" dir="ltr">Worker methods are described first, followed by container methods.  Various data types used in worker and container methods are described in their respective sections.  The concept of a “default” method for C-language workers is indicated by NULL pointers for those methods in the RCCDispatch structure.  For C++, then are simply the methods in the base class.</p>
    <h2 dir="ltr" id="toc15" style="page-break-before:always"><span class="SectionNumber">4.1 </span><a id="Toc270018431"></a><a id="RefHeading10576140039662"></a>Worker methods:  called by the container, implemented by the worker.</h2>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">This section describes the methods that a worker may implement.  One is mandatory: </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">run</span><span style="font-size:16.0px">.  All others are optional, and have default behavior.  Other than “</span><span class="Code">run</span><span style="font-size:16.0px">”, the other methods are </span><span style="font-style:italic;font-size:16.0px">control operations</span><span style="font-size:16.0px"> that perform lifecycle state transitions described in the control plane introduction section of the OpenCPI Component Development Guide.  All processing of the worker occurs in the context of these worker methods.</span></p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">For C++, <!-- &lt;!--[if gte mso 9]&gt;&lt;xml&gt;
 &lt;o:DocumentProperties&gt;
 &lt;o:Revision&gt;0&lt;/o:Revision&gt;
 &lt;o:TotalTime&gt;0&lt;/o:TotalTime&gt;
 &lt;o:Pages&gt;1&lt;/o:Pages&gt;
 &lt;o:Words&gt;71&lt;/o:Words&gt;
 &lt;o:Characters&gt;384&lt;/o:Characters&gt;
 &lt;o:Company&gt;Parera Information Services, Inc.&lt;/o:Company&gt;
 &lt;o:Lines&gt;9&lt;/o:Lines&gt;
 &lt;o:Paragraphs&gt;4&lt;/o:Paragraphs&gt;
 &lt;o:CharactersWithSpaces&gt;451&lt;/o:CharactersWithSpaces&gt;
 &lt;o:Version&gt;14.0&lt;/o:Version&gt;
 &lt;/o:DocumentProperties&gt;
 &lt;o:OfficeDocumentSettings&gt;
 &lt;o:RelyOnVML/&gt;
 &lt;o:AllowPNG/&gt;
 &lt;/o:OfficeDocumentSettings&gt;
&lt;/xml&gt;&lt;![endif]--&gt;
November 3, 2015 10:09 AM --><!-- &lt;!--[if gte mso 9]&gt;&lt;xml&gt;
 &lt;w:WordDocument&gt;
 &lt;w:View&gt;Normal&lt;/w:View&gt;
 &lt;w:Zoom&gt;0&lt;/w:Zoom&gt;
 &lt;w:TrackMoves/&gt;
 &lt;w:TrackFormatting/&gt;
 &lt;w:PunctuationKerning/&gt;
 &lt;w:ValidateAgainstSchemas/&gt;
 &lt;w:SaveIfXMLInvalid&gt;false&lt;/w:SaveIfXMLInvalid&gt;
 &lt;w:IgnoreMixedContent&gt;false&lt;/w:IgnoreMixedContent&gt;
 &lt;w:AlwaysShowPlaceholderText&gt;false&lt;/w:AlwaysShowPlaceholderText&gt;
 &lt;w:DoNotPromoteQF/&gt;
 &lt;w:LidThemeOther&gt;EN-US&lt;/w:LidThemeOther&gt;
 &lt;w:LidThemeAsian&gt;JA&lt;/w:LidThemeAsian&gt;
 &lt;w:LidThemeComplexScript&gt;X-NONE&lt;/w:LidThemeComplexScript&gt;
 &lt;w:Compatibility&gt;
 &lt;w:BreakWrappedTables/&gt;
 &lt;w:SnapToGridInCell/&gt;
 &lt;w:WrapTextWithPunct/&gt;
 &lt;w:UseAsianBreakRules/&gt;
 &lt;w:DontGrowAutofit/&gt;
 &lt;w:SplitPgBreakAndParaMark/&gt;
 &lt;w:EnableOpenTypeKerning/&gt;
 &lt;w:DontFlipMirrorIndents/&gt;
 &lt;w:OverrideTableStyleHps/&gt;
 &lt;w:UseFELayout/&gt;
 &lt;/w:Compatibility&gt;
 &lt;m:mathPr&gt;
 &lt;m:mathFont m:val="Cambria Math"/&gt;
 &lt;m:brkBin m:val="before"/&gt;
 &lt;m:brkBinSub m:val="&amp;#45;-"/&gt;
 &lt;m:smallFrac m:val="off"/&gt;
 &lt;m:dispDef/&gt;
 &lt;m:lMargin m:val="0"/&gt;
 &lt;m:rMargin m:val="0"/&gt;
 &lt;m:defJc m:val="centerGroup"/&gt;
 &lt;m:wrapIndent m:val="1440"/&gt;
 &lt;m:intLim m:val="subSup"/&gt;
 &lt;m:naryLim m:val="undOvr"/&gt;
 &lt;/m:mathPr&gt;&lt;/w:WordDocument&gt;
&lt;/xml&gt;&lt;![endif]--&gt;
November 3, 2015 10:09 AM --><!-- &lt;!--[if gte mso 9]&gt;&lt;xml&gt;
 &lt;w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
 DefSemiHidden="true" DefQFormat="false" DefPriority="99"
 LatentStyleCount="276"&gt;
 &lt;w:LsdException Locked="false" Priority="0" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Normal"/&gt;
 &lt;w:LsdException Locked="false" Priority="0" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="heading 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="0" QFormat="true" Name="heading 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="0" QFormat="true" Name="heading 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="0" QFormat="true" Name="heading 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="0" QFormat="true" Name="heading 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/&gt;
 &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/&gt;
 &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" Name="toc 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" Name="toc 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" Name="toc 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" Name="toc 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" Name="toc 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" Name="toc 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" Name="toc 7"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" Name="toc 8"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" Name="toc 9"/&gt;
 &lt;w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/&gt;
 &lt;w:LsdException Locked="false" Priority="10" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Title"/&gt;
 &lt;w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/&gt;
 &lt;w:LsdException Locked="false" Priority="11" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/&gt;
 &lt;w:LsdException Locked="false" Priority="22" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Strong"/&gt;
 &lt;w:LsdException Locked="false" Priority="20" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/&gt;
 &lt;w:LsdException Locked="false" Priority="59" SemiHidden="false"
 UnhideWhenUsed="false" Name="Table Grid"/&gt;
 &lt;w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/&gt;
 &lt;w:LsdException Locked="false" Priority="1" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/&gt;
 &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Shading"/&gt;
 &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light List"/&gt;
 &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Grid"/&gt;
 &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"
 UnhideWhenUsed="false" Name="Dark List"/&gt;
 &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Shading"/&gt;
 &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful List"/&gt;
 &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Grid"/&gt;
 &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Shading Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light List Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Grid Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/&gt;
 &lt;w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/&gt;
 &lt;w:LsdException Locked="false" Priority="34" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/&gt;
 &lt;w:LsdException Locked="false" Priority="29" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Quote"/&gt;
 &lt;w:LsdException Locked="false" Priority="30" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/&gt;
 &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"
 UnhideWhenUsed="false" Name="Dark List Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful List Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/&gt;
 &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Shading Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light List Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Grid Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"
 UnhideWhenUsed="false" Name="Dark List Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful List Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/&gt;
 &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Shading Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light List Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Grid Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"
 UnhideWhenUsed="false" Name="Dark List Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful List Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/&gt;
 &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Shading Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light List Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Grid Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"
 UnhideWhenUsed="false" Name="Dark List Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful List Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/&gt;
 &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Shading Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light List Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Grid Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"
 UnhideWhenUsed="false" Name="Dark List Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful List Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/&gt;
 &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Shading Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light List Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"
 UnhideWhenUsed="false" Name="Light Grid Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"
 UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"
 UnhideWhenUsed="false" Name="Dark List Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful List Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"
 UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/&gt;
 &lt;w:LsdException Locked="false" Priority="19" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/&gt;
 &lt;w:LsdException Locked="false" Priority="21" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/&gt;
 &lt;w:LsdException Locked="false" Priority="31" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/&gt;
 &lt;w:LsdException Locked="false" Priority="32" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/&gt;
 &lt;w:LsdException Locked="false" Priority="33" SemiHidden="false"
 UnhideWhenUsed="false" QFormat="true" Name="Book Title"/&gt;
 &lt;w:LsdException Locked="false" Priority="37" Name="Bibliography"/&gt;
 &lt;w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/&gt;
 &lt;/w:LatentStyles&gt;
&lt;/xml&gt;&lt;![endif]--&gt;
November 3, 2015 10:09 AM --><!-- &lt;!--[if gte mso 10]&gt;
&lt;style&gt;
 /* Style Definitions */
table.MsoNormalTable
 {mso-style-name:"Table Normal";
 mso-tstyle-rowband-size:0;
 mso-tstyle-colband-size:0;
 mso-style-noshow:yes;
 mso-style-priority:99;
 mso-style-parent:"";
 mso-padding-alt:0in 5.4pt 0in 5.4pt;
 mso-para-margin:0in;
 mso-para-margin-bottom:.0001pt;
 mso-pagination:widow-orphan;
 font-size:10.0pt;
 font-family:Cambria;}
&lt;/style&gt;
&lt;![endif]--&gt;
November 3, 2015 10:09 AM --><!-- &lt;!--StartFragment--&gt;
November 3, 2015 10:09 AM -->the code generation tools create a custom base class that the actual worker class inherits.  Thus the derived class that implements the worker is declared by the worker author directly in their source code.  This derived class inherits the custom base class, but can otherwise contain any other member functions and data members as long as they do not shadow certain members in the generated custom base class (which are specifically mentioned below).</span></p>
    <h3 dir="ltr" id="toc16"><span class="SectionNumber">4.1.1 </span><a id="RefHeading86921123303156"></a>RCCWorker Structure Type – C language only</h3>
    <p class="Body" dir="ltr">This structure type (typedef name) represents the visible state of a worker.  The container defines this structure (in <span class="Code">RCC_Worker.h</span>) with any content or member ordering as long as the documented members are supported.  The structure members are written by either the container or the worker, but not both.  Members written by the container are declared "const" to enhance error checking when compiling worker code.  A pointer to this structure is the first argument to all C language worker methods.</p>
    <p class="caption" dir="ltr">Table <a href="#seqrefTable0">1</a> Members of the RCCWorker Structure for C Workers</p>
    <table cellspacing="0" dir="ltr" id="Table4table" style="margin-top:0;margin-bottom:0;width:624.0px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td style="border-top:1.3333334px solid #000000;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:126.93227px">
            <p class="TableHeading" dir="ltr">Member Name</p>
          </td>
          <td style="border-top:1.3333334px solid #000000;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:132.99945px">
            <p class="TableHeading" dir="ltr">Member<br />Data Type</p>
          </td>
          <td style="border-top:1.3333334px solid #000000;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:61.537064px">
            <p class="TableHeading" dir="ltr">Written by</p>
          </td>
          <td style="border:1.3333334px solid #000000;padding:4.8px;vertical-align:top;width:257.46454px">
            <p class="TableHeading" dir="ltr">Member<br />Description</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:126.93227px">
            <p class="TableCode" dir="ltr">properties</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:132.99945px">
            <p class="TableCode" dir="ltr">void *const</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:61.537064px">
            <p class="TableContents" dir="ltr">container</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:1.3333334px solid #000000;padding:4.8px;vertical-align:top;width:257.46454px">
            <p class="TableContents" dir="ltr">A <span style="font-family:&apos;Droid Sans&apos;">const</span> pointer to the properties structure for the worker, whose layout is implied by the properties declared in the OCS and OWD.  The value is NULL if there are no such properties.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:126.93227px">
            <p class="TableCode" dir="ltr" style="font-style:normal">memories</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:132.99945px">
            <p class="TableCode" dir="ltr">void *const<br />*const</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:61.537064px">
            <p class="TableContents" dir="ltr">container</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:1.3333334px solid #000000;padding:4.8px;vertical-align:top;width:257.46454px">
            <p class="TableContents" dir="ltr">An array of const pointers to the memory resources requested by the worker in the <span class="Code">memSizes</span> member of the <span class="Code">RCCDispatch</span> structure.  Any memories that are not read-only are initialized to zero before a worker executes any method.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:126.93227px">
            <p class="TableCode" dir="ltr" style="font-style:normal">memory</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:132.99945px">
            <p class="TableCode" dir="ltr">void *const</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:61.537064px">
            <p class="TableContents" dir="ltr">container</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:1.3333334px solid #000000;padding:4.8px;vertical-align:top;width:257.46454px">
            <p class="TableContents" dir="ltr">A pointer to the memory resource as requested in the <span class="Code">memSize</span> member of the <span class="Code">RCCDispatch</span> structure.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:126.93227px">
            <p class="TableCode" dir="ltr">container</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:132.99945px">
            <p class="TableCode" dir="ltr">const RCCContainer</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:61.537064px">
            <p class="TableContents" dir="ltr">container</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:1.3333334px solid #000000;padding:4.8px;vertical-align:top;width:257.46454px">
            <p class="TableContents" dir="ltr">A dispatch table of container method/function pointers.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:126.93227px">
            <p class="TableCode" dir="ltr">runCondition</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:132.99945px">
            <p class="TableCode" dir="ltr">RCCRunCondition*</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:61.537064px">
            <p class="TableContents" dir="ltr">worker</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:1.3333334px solid #000000;padding:4.8px;vertical-align:top;width:257.46454px">
            <p class="TableContents" dir="ltr">Initialized from the <span class="Code">RCCDispatch runCondition</span> member.  Checked by container after calling the start method.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:126.93227px">
            <p class="TableCode" dir="ltr" style="font-style:normal">connectedPorts</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:132.99945px">
            <p class="TableCode" dir="ltr">RCCPortMask</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:61.537064px">
            <p class="TableContents" dir="ltr">container</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:1.3333334px solid #000000;padding:4.8px;vertical-align:top;width:257.46454px">
            <p class="TableContents" dir="ltr">A mask indicating which ports are connected.  A worker can check this to see if an optional port is connected.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:126.93227px">
            <p class="TableCode" dir="ltr">ports</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:132.99945px">
            <p class="TableCode" dir="ltr">RCCPort[]</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:none;padding:4.8px;vertical-align:top;width:61.537064px">
            <p class="TableContents" dir="ltr">varies by<br />member</p>
          </td>
          <td style="border-top:none;border-bottom:1.3333334px solid #000000;border-left:1.3333334px solid #000000;border-right:1.3333334px solid #000000;padding:4.8px;vertical-align:top;width:257.46454px">
            <p class="TableContents" dir="ltr">An array of RCCPort structures, indexed by port ordinals.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <h3 dir="ltr" id="toc17"><span class="SectionNumber">4.1.2 </span><a id="RefHeading10578140039662"></a>RCC<a id="Toc270018432"></a>Result Enumeration Type (C and C++)</h3>
    <p class="Body" dir="ltr">The RCCResult type is an enumeration type used as the return value for all worker methods.  It indicates to the container what to do when the worker method returns, as described in the following table:</p>
    <p class="caption" dir="ltr">Table <a href="#seqrefTable0">1</a>:  RCCResult Return Values</p>
    <table cellspacing="0" dir="ltr" id="Table5table" style="margin-top:0;margin-bottom:0;margin-left:1.0px;margin-right:auto;width:575.136px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td style="border-top:1.0px solid #000001;border-bottom:4.0px solid #000001;border-left:1.0px solid #000001;border-right:none;padding:4.8px;vertical-align:middle;width:157.87038px">
            <p class="TableHeading" dir="ltr">Enumeration Identifier</p>
          </td>
          <td style="border-top:1.0px solid #000001;border-bottom:4.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding:4.8px;vertical-align:middle;width:395.0656px">
            <p class="TableHeading" dir="ltr">Description</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:4.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:none;padding:4.8px;vertical-align:top;width:157.87038px">
            <p class="TableContents" dir="ltr"><span class="Code">RCC_OK</span></p>
          </td>
          <td style="border-top:4.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding:4.8px;vertical-align:top;width:395.0656px">
            <p class="TableContents" dir="ltr">The worker method succeeded without error.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:1.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:none;padding:4.8px;vertical-align:top;width:157.87038px">
            <p class="TableContents" dir="ltr"><span class="Code">RCC_ERROR</span></p>
          </td>
          <td style="border:1.0px solid #000001;padding:4.8px;vertical-align:top;width:395.0656px">
            <p class="TableContents" dir="ltr">The worker method did not succeed, but the error is not fatal to worker or container, thus the method may be retried if defined to allow this.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:1.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:none;padding:4.8px;vertical-align:top;width:157.87038px">
            <p class="TableContents" dir="ltr"><span class="Code">RCC_FATAL</span></p>
          </td>
          <td style="border:1.0px solid #000001;padding:4.8px;vertical-align:top;width:395.0656px">
            <p class="TableContents" dir="ltr">The worker should never run again. It is non-functional.  The container or other workers may be damaged.  The worker is in an <span style="font-style:italic;font-weight:bold">unusable</span> state.  The container may know that it, or other workers are protected from damage, but the worker indicates this condition in case there is no such protection.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:1.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:none;padding:4.8px;vertical-align:top;width:157.87038px">
            <p class="TableContents" dir="ltr"><span class="Code">RCC_DONE</span></p>
          </td>
          <td style="border:1.0px solid #000001;padding:4.8px;vertical-align:top;width:395.0656px">
            <p class="TableContents" dir="ltr">The worker needs no more execution; a normal completion.  The worker is entering the <span style="font-style:italic;font-weight:bold">finished</span> state.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:1.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:none;padding:4.8px;vertical-align:top;width:157.87038px">
            <p class="TableContents" dir="ltr"><span class="Code">RCC_ADVANCE</span></p>
          </td>
          <td style="border:1.0px solid #000001;padding:4.8px;vertical-align:top;width:395.0656px">
            <p class="TableContents" dir="ltr">The worker is requesting that all ports that were ready when the run method was entered be <span style="font-style:italic">advanced</span> (applies only to the run method).</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:1.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:none;padding:4.8px;vertical-align:top;width:157.87038px">
            <p class="TableContents" dir="ltr"><span class="Code">RCC_ADVANCE_DONE</span></p>
          </td>
          <td style="border:1.0px solid #000001;padding:4.8px;vertical-align:top;width:395.0656px">
            <p class="TableContents" dir="ltr">The worker is requesting that all ports be advanced (run method only) and declaring that it is also “done”. The worker is entering the <span style="font-style:italic;font-weight:bold">finished</span> state.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="Body" dir="ltr"><span style="font-family:Arial,sans-serif;font-size:16.0px">These return values apply to each method as defined in their specific behavior.  Some values are not valid results for all methods. </span><span style="font-family:Arial,sans-serif;font-size:16.0px;color:#000000;background-color:transparent"> When the result is </span><span class="Code"><span style="color:#000000">RCC_ERROR</span></span><span style="font-family:Arial,sans-serif;font-size:16.0px;color:#000000;background-color:transparent"> or </span><span class="Code"><span style="color:#000000">RCC_FATAL</span></span><span style="font-family:Arial,sans-serif;font-size:16.0px;color:#000000;background-color:transparent">, the worker may have also set a descriptive error message via the </span><span class="Code"><span style="color:#000000">setError</span></span><span style="font-family:Arial,sans-serif;font-size:16.0px;color:#000000;background-color:transparent"> container method</span> described below.</p>
    <h3 dir="ltr" id="toc18"><span class="SectionNumber">4.1.3 </span><a id="RefHeading10580140039662"></a><span style="font-weight:bold">i</span><a id="Toc211780947"></a><a id="Toc211781070"></a><span style="font-weight:bold">nitialize</span> — worker method</h3>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">This worker method implements the </span><span style="font-style:italic;font-size:16.0px">initialize</span><span style="font-size:16.0px"> control operation as defined in [CDG].  It is optional.  A worker author should implement this method under any of the following conditions:</span></p>
    <ul class="listlevel1WWNum32">
      <li>
        <p class="ListBullet" dir="ltr">There are initialization errors that can be reported to the container.</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">There is significant processing work involved in the initialization.</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">There are significant resource allocations performed during initialization.</p>
      </li>
    </ul>
    <p class="Body" dir="ltr">If none of the above are true, this method can be unimplemented (and thus the default implementation will be used).  Note that initial property settings are <span style="font-style:italic">not</span> available when the <span class="Code">initialize</span> method is called.</p>
    <p class="Body" dir="ltr">Using the <span class="Code"><span style="font-style:normal">initialize</span></span> method will allow the <span class="Code"><span style="font-style:normal">run</span></span> or <span class="Code">start</span> methods to be more consistent in execution time, since without an <span class="Code"><span style="font-style:normal">initialize</span></span>, all one-time initialization must be done on the first invocation of <span class="Code">start</span>, or if <span class="Code">start</span> is unimplemented, the first invocation of <span class="Code"><span style="font-style:normal">run</span></span>.</p>
    <h4 dir="ltr" id="toc19"><span class="SectionNumber">4.1.3.1 </span><a id="Toc211781071"></a><a id="RefHeading10660140039662"></a>Synopsis</h4>
    <p class="Code" dir="ltr">static RCCResult initialize(RCCWorker *self);  // C language<br />RCCResult initialize();                        // C++ language</p>
    <h4 dir="ltr" id="toc20"><span class="SectionNumber">4.1.3.2 </span><a id="RefHeading10662140039662"></a><a id="Toc211781072"></a>Returns</h4>
    <p class="Body" dir="ltr">This method shall return a <span class="Code">RCCResult</span> value.</p>
    <p class="Body" dir="ltr">If the initialization cannot succeed, it shall return <span class="Code">RCC_ERROR</span>.  If the worker detects an error that would disable the implementation or its environment, it shall return <span class="Code">RCC_FATAL</span>.  Otherwise it shall return <span class="Code">RCC_OK</span> if normal worker execution should proceed.</p>
    <h3 dir="ltr" id="toc21"><span class="SectionNumber">4.1.4 </span><a id="RefHeading10582140039662"></a><span style="font-style:italic;font-weight:bold">s</span><a id="Toc211780948"></a><a id="Toc211781074"></a><span style="font-style:italic;font-weight:bold">tart</span> — worker method</h3>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">This method implements the </span><span style="font-style:italic;font-size:16.0px">start</span><span style="font-size:16.0px"> control operation as defined in [CDG].  It is optional.  Upon successful completion, the worker is in the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">operating</span><span style="font-size:16.0px"> state or the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">finished</span><span style="font-size:16.0px"> state.   This operation is called for the first time after initialization, and also may be called after a successful </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">stop</span><span style="font-size:16.0px"> operation, to </span><span style="font-style:italic;font-size:16.0px">resume</span><span style="font-size:16.0px"> execution.</span></p>
    <h4 dir="ltr" id="toc22"><span class="SectionNumber">4.1.4.1 </span><a id="RefHeading10664140039662"></a><a id="Toc211781075"></a>Synopsis</h4>
    <p class="Code" dir="ltr">static RCCResult start(RCCWorker *self);  // C language<br />RCCResult start();                        // C++ language</p>
    <h4 dir="ltr" id="toc23"><span class="SectionNumber">4.1.4.2 </span><a id="RefHeading10666140039662"></a><a id="Toc211781076"></a>Returns</h4>
    <p class="Body" dir="ltr">This method shall return a <span class="Code">RCCResult</span> value.</p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">If the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">start</span><span style="font-size:16.0px"> method cannot succeed, it shall return </span><span class="Code">RCC_ERROR</span><span style="font-size:16.0px">.  If the worker detects an error that would disable the implementation or its environment, it shall return </span><span class="Code">RCC_FATAL</span><span style="font-size:16.0px">.  It shall return </span><span class="Code">RCC_DONE</span><span style="font-size:16.0px"> if no worker execution should proceed, to indicate that it is entering the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">finished</span><span style="font-size:16.0px"> state.  Otherwise it shall return </span><span class="Code">RCC_OK</span><span style="font-size:16.0px"> if normal worker execution should proceed.</span></p>
    <p class="Body" dir="ltr">Returning <span class="Code">RCC_DONE</span> indicates to the container that the worker will never require further execution, and provides this advice to the container to allow the container to take advantage of this fact and possibly release resources (such as I/O buffers) prior to the worker instance being destroyed or reused.</p>
    <h3 dir="ltr" id="toc24"><span class="SectionNumber">4.1.5 </span><a id="RefHeading10584140039662"></a><span style="font-weight:bold">s</span><a id="Toc211780949"></a><a id="Toc211781078"></a><span style="font-weight:bold">top</span> — worker method</h3>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">This method implements the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">stop</span><span style="font-size:16.0px"> control operation as described in [CDG].  Upon successful completion, the worker is in the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">suspended</span><span style="font-size:16.0px"> state.  It will be also called before the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">release</span><span style="font-size:16.0px"> method, and before destruction, if the worker is in the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">operating</span><span style="font-size:16.0px"> state.</span></p>
    <h4 dir="ltr" id="toc25"><span class="SectionNumber">4.1.5.1 </span><a id="RefHeading10668140039662"></a><a id="Toc211781079"></a>Synopsis</h4>
    <p class="Code" dir="ltr">static RCCResult stop(RCCWorker *self);  // C language<br />RCCResult stop();                        // C++ language</p>
    <h4 dir="ltr" id="toc26"><span class="SectionNumber">4.1.5.2 </span><a id="RefHeading10670140039662"></a><a id="Toc211781080"></a>Returns</h4>
    <p class="Body" dir="ltr">This method shall return a <span class="Code">RCCResult</span> value.</p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">If the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">stop</span><span style="font-size:16.0px"> method cannot succeed, it shall return </span><span class="Code">RCC_ERROR</span><span style="font-size:16.0px">.  If the worker detects an error that would disable the implementation or its environment, it shall return </span><span class="Code">RCC_FATAL</span><span style="font-size:16.0px">.  Otherwise it shall return </span><span class="Code">RCC_OK</span><span style="font-size:16.0px">.</span></p>
    <h3 dir="ltr" id="toc27"><span class="SectionNumber">4.1.6 </span><a id="RefHeading10586140039662"></a><span style="font-weight:bold">r</span><a id="Toc211780950"></a><a id="Toc211781082"></a><span style="font-weight:bold">elease</span> — worker method</h3>
    <p class="Textbodyindent" dir="ltr" style="font-family:Arial,sans-serif"><span style="font-size:16.0px">This method implements the </span><span style="font-style:italic;font-size:16.0px">release</span><span style="font-size:16.0px"> control operation as described in [CDG].  After successful completion, the worker instance is in the </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">exists</span><span style="font-size:16.0px"> state.</span></p>
    <h4 dir="ltr" id="toc28"><span class="SectionNumber">4.1.6.1 </span><a id="Toc211781083"></a><a id="RefHeading10672140039662"></a>Synopsis</h4>
    <p class="Code" dir="ltr">static RCCResult release(RCCWorker *self);  // C language<br />RCCResult release();                        // C++ language</p>
    <h4 dir="ltr" id="toc29"><span class="SectionNumber">4.1.6.2 </span><a id="Toc211781084"></a><a id="RefHeading10674140039662"></a>Returns</h4>
    <p class="Body" dir="ltr">This method shall return a <span class="Code">RCCResult</span> value.</p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">If the </span><span style="font-style:italic;font-size:16.0px">release</span><span style="font-size:16.0px"> method cannot succeed, it shall return </span><span class="Code">RCC_ERROR</span><span style="font-size:16.0px">.  If the worker detects an error that would disable the implementation or its environment, or it is unable to return resources it allocated, it shall return </span><span class="Code">RCC_FATAL</span><span style="font-size:16.0px">.  Otherwise it shall return </span><span class="Code">RCC_OK</span><span style="font-size:16.0px">.</span></p>
    <h3 dir="ltr" id="toc30"><span class="SectionNumber">4.1.7 </span><a id="RefHeading10588140039662"></a><span style="font-weight:bold">a</span><a id="Toc211780951"></a><a id="Toc211781086"></a><span style="font-weight:bold">fterConfigure</span> — worker method</h3>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">This optional method implements the </span><span style="font-style:italic;font-size:16.0px">afterConfigure</span><span style="font-size:16.0px"> control operation.  It is called by the container after properties have been changed that have been specified in the OWD as requiring synchronization with the worker (using the </span><span class="Code">writeSync</span><span style="font-size:16.0px"> attribute).</span></p>
    <h4 dir="ltr" id="toc31"><span class="SectionNumber">4.1.7.1 </span><a id="RefHeading10676140039662"></a><a id="Toc211781087"></a>Synopsis</h4>
    <p class="Code" dir="ltr">static RCCResult afterConfigure(RCCWorker* self);  // C language<br />RCCResult afterConfigure();                        // C++ language</p>
    <h4 dir="ltr" id="toc32"><span class="SectionNumber">4.1.7.2 </span><a id="Toc211781088"></a><a id="RefHeading10678140039662"></a>Returns</h4>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">This method shall return a </span><span class="Code">RCC<span style="font-style:normal">Result</span></span><span style="font-style:normal;font-size:16.0px"> </span><span style="font-size:16.0px">value.</span></p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">If the </span><span style="font-style:italic;font-size:16.0px">afterConfigure</span><span style="font-size:16.0px"> method cannot succeed, it shall return </span><span class="Code">RCC_ERROR</span><span style="font-size:16.0px">.  If the worker detects an error that would disable the implementation or its environment, it shall return </span><span class="Code">RCC_FATAL</span><span style="font-size:16.0px">.  Otherwise it shall return </span><span class="Code">RCC_OK</span><span style="font-size:16.0px">.</span></p>
    <h3 dir="ltr" id="toc33"><span class="SectionNumber">4.1.8 </span><a id="RefHeading10590140039662"></a><span style="font-weight:bold">b</span><a id="Toc211780952"></a><a id="Toc211781090"></a><span style="font-weight:bold">eforeQuery</span> — worker method</h3>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">This optional method implements the </span><span style="font-style:italic;font-size:16.0px">beforeQuery</span><span style="font-size:16.0px"> control operation.  It is called by the container before properties have been accessed that have been specified in the OWD as requiring synchronization with the worker (using the </span><span class="Code">readSync</span><span style="font-size:16.0px"> attribute).</span></p>
    <h4 dir="ltr" id="toc34"><span class="SectionNumber">4.1.8.1 </span><a id="RefHeading10680140039662"></a><a id="Toc211781091"></a>Synopsis</h4>
    <p class="Code" dir="ltr">static RCCResult beforeQuery(RCCWorker *self);  // C language<br />RCCResult beforeQuery();                        // C++ language</p>
    <h4 dir="ltr" id="toc35"><span class="SectionNumber">4.1.8.2 </span><a id="RefHeading10682140039662"></a><a id="Toc211781092"></a>Returns</h4>
    <p class="Body" dir="ltr">This method shall return a <span class="Code">RCCResult</span> value.</p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">If the </span><span style="font-style:italic;font-size:16.0px">beforeQuery</span><span style="font-size:16.0px"> method cannot succeed, it shall return </span><span class="Code">RCC_ERROR</span><span style="font-size:16.0px">.  If the worker detects an error that would disable the implementation or its environment, it shall return </span><span class="Code">RCC_FATAL</span><span style="font-size:16.0px">.  Otherwise it shall return </span><span class="Code">RCC_OK</span><span style="font-size:16.0px">.</span></p>
    <h3 dir="ltr" id="toc36"><span class="SectionNumber">4.1.9 </span><a id="RefHeading10592140039662"></a><span style="font-weight:bold">r</span><a id="Toc211780953"></a><a id="Toc211781094"></a><span style="font-weight:bold">un</span><a id="RefHeading10684140039662"></a> — worker method</h3>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">The </span><span style="font-style:italic;font-weight:bold;font-size:16.0px">run</span><span style="font-size:16.0px"> method requests that the worker perform its normal computation.  The container only calls this method when the worker’s </span><span style="font-style:italic;font-size:16.0px">run condition</span><span style="font-size:16.0px"> is satisfied.</span></p>
    <h4 dir="ltr" id="toc37"><span class="SectionNumber">4.1.9.1 </span><a id="Toc211781096"></a><a id="RefHeading10686140039662"></a>Synopsis</h4>
    <p class="Code" dir="ltr">static RCCResult run(RCCWorker *self,<br />                     RCCBoolean timedOut,<br />                     RCCBoolean *newRunCondition);  // C language<br />RCCResult run(bool timedOut);                       // C++ langauge</p>
    <h4 dir="ltr" id="toc38"><span class="SectionNumber">4.1.9.2 </span><a id="Toc211781097"></a><a id="RefHeading10688140039662"></a>Behavior</h4>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">The </span><span style="font-style:italic;font-size:16.0px">run</span><span style="font-size:16.0px"> method shall perform the worker's computational function and return a result.  The </span><span style="font-style:italic;font-size:16.0px">run</span><span style="font-size:16.0px"> method may use information in its property structure, the state of its ports, and its requested local and global/persistent member data to decide what to do.  Normally this involves using messages in buffers at input ports to produce messages in buffers at output ports.</span></p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">The </span><span class="Code"><span style="font-style:normal">timedOut</span></span><span style="font-size:16.0px"> input argument indicates whether the </span><span style="font-style:italic;font-size:16.0px">run</span><span style="font-size:16.0px"> method is being invoked due to time passing (the </span><span class="Code"><span style="font-style:normal">usecs</span></span><span style="font-size:16.0px"> value of the run condition).  This indication is independent of port readiness other than indicating that the run condition was </span><span style="font-style:italic;font-size:16.0px">not</span><span style="font-size:16.0px"> met.</span></p>
    <p class="Body" dir="ltr"><span style="font-style:italic;font-weight:bold;font-size:16.0px">C Language:</span><span style="font-size:16.0px">  Each port's </span><span class="Code">current.data</span><span style="font-size:16.0px"> member</span><span style="font-style:italic;font-size:16.0px"> </span><span style="font-size:16.0px">may be tested to indicate port readiness if that port is </span><span style="font-style:italic;font-size:16.0px">not</span><span style="font-size:16.0px"> included in the run condition.</span></p>
    <p class="Body" dir="ltr"><span style="font-style:italic;font-weight:bold;font-size:16.0px">C++ Language:</span><span style="font-size:16.0px">  Each port is a member data object whose name is the name of the port.  The </span><span class="Code">hasBuffer()</span><span style="font-size:16.0px"> method on that port object (e.g. </span><span class="Code">indata.hasBuffer()</span><span style="font-size:16.0px">), returns whether the port is ready.</span></p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">Normally this test is unnecessary since the container only calls this </span><span class="Code">run</span><span style="font-size:16.0px"> method when the run condition is satisfied, and that implies that all ports included in the run condition have buffers (i.e. are </span><span style="font-style:italic;font-size:16.0px">ready</span><span style="font-size:16.0px">).</span></p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">The </span><span style="font-style:italic;font-size:16.0px">run</span><span style="font-size:16.0px"> method can indicate that all ports should be advanced by the special return value </span><span class="Code">RCC_ADVANCE.</span><span style="font-size:16.0px">  It can also indicate disposition of buffers and ports by using the </span><span style="font-weight:bold;font-size:16.0px">release</span><span style="font-size:16.0px">, </span><span style="font-weight:bold;font-size:16.0px">send</span><span style="font-size:16.0px">, </span><span style="font-weight:bold;font-size:16.0px">request</span><span style="font-size:16.0px">, </span><span style="font-weight:bold;font-size:16.0px">take</span><span style="font-size:16.0px">, or </span><span style="font-weight:bold;font-size:16.0px">advance</span><span style="font-size:16.0px"> container methods.</span></p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,sans-serif;font-style:italic;font-weight:bold;font-size:16.0px">C Language:</span><span style="font-family:Arial,sans-serif;font-size:16.0px">  The </span><span style="font-family:Arial,sans-serif;font-style:italic;font-weight:bold;font-size:16.0px">run</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> method may change the run condition by setting a TRUE value to the location indicated by the </span><span class="Code">newRunCondition</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> output argument, and setting a pointer to a new run condition in the </span><span class="Code">runCondition</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> member of </span><span class="Code">RCCWorker</span><span style="font-family:Arial,sans-serif;font-size:16.0px">.  The </span><span class="Code">runCondition</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> member of </span><span class="Code">RCCWorker</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> is initially set to the value in the </span><span class="Code">RCCDispatch</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> structure (including </span><span class="Code">NULL</span> to indicate the default run condition<span style="font-family:Arial,sans-serif;font-size:16.0px">).</span></p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,sans-serif;font-style:italic;font-weight:bold;font-size:16.0px">C++ Language:</span><span style="font-family:Arial,sans-serif;font-size:16.0px">  The </span><span style="font-family:Arial,sans-serif;font-style:italic;font-weight:bold;font-size:16.0px">run</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> method may change the run condition using the </span><span class="Code">setRunCondition</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> container method passing a pointer to a (not </span><span style="font-family:Arial,sans-serif;font-style:italic;font-size:16.0px">const</span><span style="font-family:Arial,sans-serif;font-size:16.0px">) new run condition object.  The current run condition (pointer) is retrieved using the </span><span class="Code">getRunCondition()</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> method.  The run condition for a worker is initially set to the default, which is retrieved as </span><span class="Code">NULL</span><span style="font-family:Arial,sans-serif;font-size:16.0px">.</span></p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,sans-serif;font-size:16.0px">If the runCondition is set to </span><span class="Code">NULL</span><span style="font-family:Arial,sans-serif;font-size:16.0px">, the default run condition is restored.  The run condition for a worker is initially set to the default.  Since the worker code is managing the run conditions (passed by pointer), it can use it as a convenient “state variable” when its execution modes each have a different run condition.</span></p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,sans-serif;font-size:16.0px">Code in the </span><span style="font-family:Arial,sans-serif;font-style:italic;font-weight:bold;font-size:16.0px">run</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> method accesses information about ports and current buffers by accessing objects/structures that are ports in the Worker object.</span></p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,sans-serif;font-style:italic;font-weight:bold;font-size:16.0px">C Language:  </span><span style="font-family:Arial,sans-serif;font-size:16.0px">The </span><span style="font-family:Arial,sans-serif;font-style:italic;font-size:16.0px">run</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> method accesses information about current buffers through members of each port's </span><span class="Code">RCCPort</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> structure member in the </span><span class="Code">ports</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> array in the </span><span class="Code">RCCWorker</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> structure (e.g. </span><span class="Code">self-&gt;ports[n]</span><span style="font-family:Arial,sans-serif;font-size:16.0px">, where </span><span class="Code">n</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> is the ordinal for the port).  The </span><span class="Code">current.data</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> member is the pointer to the message data for both input and output ports.  For input ports, the </span><span class="Code">input.length</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> structure member of the </span><span class="Code">RCCPort</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> is the length of bytes of the message in the current buffer, and </span><span class="Code">input.u.operation</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> is the opcode for the current input message.  For output ports, the </span><span class="Code">output.length</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> is the length of bytes of the message in the current buffer, and </span><span class="Code">output.u.operation</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> is the opcode for the current output message.</span></p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,sans-serif;font-style:italic;font-weight:bold;font-size:16.0px">C++ Language:</span><span style="font-family:Arial,sans-serif;font-size:16.0px">  The </span><span style="font-family:Arial,sans-serif;font-style:italic;font-size:16.0px">run</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> method accesses port status and buffer contents using the worker's object port data member methods.</span></p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,sans-serif;font-size:16.0px">If a port is in the worker’s run condition, then it can assume a current buffer is present at that port when the run method is entered.  If not, the worker can test whether there is a current buffer; in C, the port's </span><span class="Code">current.data</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> member is non-</span><span class="Code">NULL</span><span style="font-family:Arial,sans-serif;font-size:16.0px">, in C++, the port's </span><span class="Code">hasBuffer()</span><span style="font-family:Arial,sans-serif;font-size:16.0px"> returns true.</span></p>
    <p class="Body" dir="ltr" style="font-family:Arial,sans-serif;font-size:16.0px">The full definition of buffer and port object/structure types is in the container method section below.</p>
    <h4 dir="ltr" id="toc39"><span class="SectionNumber">4.1.9.3 </span><a id="RefHeading10690140039662"></a><a id="Toc211781098"></a>Returns</h4>
    <p class="Body" dir="ltr">This method shall return a <span class="Code">RCCResult</span> value.</p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">The value </span><span class="Code">RCC_ADVANCE</span><span style="font-size:16.0px"> indicates that all ports should be advanced that were ready on entry to the </span><span style="font-style:italic;font-size:16.0px">run</span><span style="font-size:16.0px"> function and were not subject to container methods called since then (e.g. advance, request etc. described below).</span></p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">If the </span><span style="font-style:italic;font-size:16.0px">run</span><span style="font-size:16.0px"> method cannot succeed, it should return </span><span class="Code">RCC_ERROR</span><span style="font-size:16.0px">, indicating that it should not be called again (regardless of run condition).  If the worker detects an error that would disable the implementation or its environment, it should return </span><span class="Code">RCC_FATAL</span><span style="font-size:16.0px">.  Otherwise it should return </span><span class="Code">RCC_OK</span><span style="font-size:16.0px"> or </span><span class="Code">RCC_ADVANCE</span><span style="font-size:16.0px"> if normal worker execution should proceed (the </span><span style="font-style:italic;font-size:16.0px">run</span><span style="font-size:16.0px"> method will be called again when the run condition is true).</span></p>
    <p class="Body" dir="ltr">The run method should return <span class="Code">RCC_DONE</span> if no further worker execution should happen.  Returning <span class="Code">RCC_DONE</span> indicates to the container that the worker will never require further execution.  Providing this advice to the container allows it to take advantage of this fact and possibly release resources (such as I/O buffers) prior to the worker instance being destroyed or reused.</p>
    <p class="Body" dir="ltr">Returning <span class="Code">RCC_ADVANCE_DONE</span> combines the meaning of <span class="Code">RCC_ADVANCE</span> and <span class="Code">RCC_DONE</span>.</p>
    <h2 dir="ltr" id="toc40" style="page-break-before:always;font-style:italic;font-weight:bold"><span class="SectionNumber">4.2 </span><a id="Toc270018433"></a><a id="RefHeading10596140039662"></a>Container methods, called by the worker.</h2>
    <p class="Body" dir="ltr">These methods are those that the worker calls to invoke some functionality provided by the container.   The container methods are in three categories:  container scope (this section), port scope (next section) and buffer scope (following section).</p>
    <p class="Body" dir="ltr">The use of all container methods is optional, and typically unneeded for simple workers that only use run conditions and the <span style="font-style:italic">run</span> method.  They are mostly used to provide additional flexibility and functionality in message handling.</p>
    <p class="Body" dir="ltr">The methods are described below, and the following section details the data types used by the arguments of the container methods.  <span style="font-style:italic;font-weight:bold">All container methods are non-blocking</span>.</p>
    <p class="Body" dir="ltr"><span style="font-style:italic;font-weight:bold">C Language:</span>  container methods are accessed using function pointer members in the container structure member of the RCCWorker structure, e.g.:</p>
    <p class="Code" dir="ltr">self-&gt;container.setError(...)</p>
    <p class="Body" dir="ltr"><span style="font-style:italic;font-weight:bold">C++ Language:</span>  container methods exist in an accessible base class for the worker and are thus called directly.  Container methods relating to ports and buffers are in fact methods of the worker's member data objects for ports, rather than on the worker (or container) objects.</p>
    <h3 dir="ltr" id="toc41"><span class="SectionNumber">4.2.1 </span><a id="RefHeadingToc53201067000368"></a><span style="font-weight:bold">t</span><a id="Toc270018435"></a><span style="font-weight:bold">ime/getTime</span> — container method</h3>
    <p class="Body" dir="ltr">This method is used by the worker to retrieve the time of day as a 64 bit unsigned number that represents GPS time in units of 2^-32 seconds (~233 ps).  Thus the most significant 32 bits represent GPS time in seconds.  The accuracy of this time is dependent on the container implementation.</p>
    <p class="Body" dir="ltr">Note that GPS time is monotonic, as opposed to UTC time (the POSIX standard), which is subject to leap seconds etc.</p>
    <h4 dir="ltr" id="toc42"><span class="SectionNumber">4.2.1.1 </span><a id="RefHeading10700140039662"></a>Synopsis</h4>
    <p class="Code" dir="ltr">RCCTime (*time)();  // C Language<br />RCCTime getTime();  // C++ Language</p>
    <h4 dir="ltr" id="toc43"><span class="SectionNumber">4.2.1.2 </span><a id="RefHeading10702140039662"></a>Returns</h4>
    <p class="Textbodyindent" dir="ltr">This function returns GPS time in units of 2^-32 seconds.</p>
    <h3 dir="ltr" id="toc44"><span class="SectionNumber">4.2.2 </span><a id="Toc270018434"></a><a id="RefHeadingToc53221067000368"></a><span style="font-weight:bold">setError</span> — container method</h3>
    <p class="Body" dir="ltr">This method is used by the worker to convey an error message associated with returning <span class="Code">RCC_ERROR</span> or <span class="Code">RCC_FATAL</span>.  It has semantics similar to printf.</p>
    <h4 dir="ltr" id="toc45"><span class="SectionNumber">4.2.2.1 </span><a id="RefHeading10696140039662"></a>Synopsis</h4>
    <p class="Code" dir="ltr">RCCResult (*setError)(const char *fmt, ...);  // C Language<br />RCCResult setError(const char *fmt, …);       // C++ Language</p>
    <h4 dir="ltr" id="toc46"><span class="SectionNumber">4.2.2.2 </span><a id="RefHeading10698140039662"></a>Returns</h4>
    <p class="Body" dir="ltr">This function returns <span class="Code">RCC_ERROR</span>, which allows a worker to simultaneously set the error and return the error indication.  For example, a worker method could have (in C):</p>
    <p class="Code" dir="ltr">if (some error condition)<br />  return self-&gt;container.setError(“Failure due to %d”, arg);</p>
    <p class="Body" dir="ltr">Or, in C++:</p>
    <p class="Code" dir="ltr">if (some error condition)<br />  return setError(“Failure due to %d”, arg);</p>
    <p class="Body" dir="ltr">If the worker must be return <span class="Code">RCC_FATAL</span>, it must call this function separate from returning that value.</p>
    <h3 dir="ltr" id="toc47"><span class="SectionNumber">4.2.3 </span><a id="RefHeadingToc53241067000368"></a><span style="font-weight:bold">getRunCondition</span> — container method — C++ Language only</h3>
    <p class="Body" dir="ltr">This method is used by the worker to retrieve its current run condition.  If the current run condition is specified to be the default, <span class="Code">NULL</span> is returned.  Otherwise the pointer returned is the most recent one passed from the worker to the container in the setRunCondition method.</p>
    <h4 dir="ltr" id="toc48"><span class="SectionNumber">4.2.3.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">RCC::RunCondition *getRunCondition(); </p>
    <h4 dir="ltr" id="toc49"><span class="SectionNumber">4.2.3.2 </span>Returns</h4>
    <p class="Body" dir="ltr">This function returns a pointer to the run condition most recently set by the worker using the setRunCondition call, or NULL.</p>
    <h3 dir="ltr" id="toc50"><span class="SectionNumber">4.2.4 </span><a id="RefHeadingToc53261067000368"></a><span style="font-weight:bold">setRunCondition</span> — container method — C++ Language only</h3>
    <p class="Body" dir="ltr">This container method is used by the worker to set a new run condition.  If the run condition supplied is <span class="Code">NULL</span>, the default run condition becomes active, which is to wait for all ports to be ready, with no timeout. If the worker needs to start execution with a non-default run condition, it can call this container method in its constructor, or in its <span class="Code">initialize</span> or <span class="Code">start</span> methods.</p>
    <h4 dir="ltr" id="toc51"><span class="SectionNumber">4.2.4.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">void setRunCondition(RCC::RunCondition *rc);</p>
    <h4 dir="ltr" id="toc52"><span class="SectionNumber">4.2.4.2 </span>Returns</h4>
    <p class="Body" dir="ltr">No return value. </p>
    <h3 dir="ltr" id="toc53"><span class="SectionNumber">4.2.5 </span><a id="RefHeadingToc53281067000368"></a>The <span style="font-weight:bold">RCC::RunCondition</span> C++ class</h3>
    <p class="Body" dir="ltr">The RCC::RunCondition type represents the run conditions described above, and holds the information used by the container to determine when it is appropriate to invoke the <span class="Code">run</span> operation of a worker.  It is a C++ Struct, with convenience constructors.  The defined members are always written by the worker, and never by the container.  The following table describes the accessible members of the RunCondition structure.</p>
    <p class="caption" dir="ltr">Table <a href="#seqrefTable0">1</a>:  RunCondition Members</p>
    <table cellspacing="0" dir="ltr" id="Table3table" style="margin-top:0;margin-bottom:0;margin-left:0;margin-right:auto;width:631.6704px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td dir="ltr" style="border-top:1.0px solid #000001;border-bottom:4.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:67.3984px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-weight:bold;font-size:14.666667px">Member Name</p>
          </td>
          <td dir="ltr" style="border-top:1.0px solid #000001;border-bottom:4.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:104.0032px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px"><span style="font-weight:bold">Member</span><br /><span style="font-weight:bold">Data Type</span></p>
          </td>
          <td dir="ltr" style="border-top:1.0px solid #000001;border-bottom:4.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:411.0688px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px"><span style="font-weight:bold">Member</span><br /><span style="font-weight:bold">Description</span></p>
          </td>
        </tr>
        <tr>
          <td dir="ltr" style="border-top:4.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:67.3984px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">portMasks</p>
          </td>
          <td dir="ltr" style="border-top:4.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:104.0032px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">RCCPortMask *</p>
          </td>
          <td dir="ltr" style="border-top:4.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:411.0688px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">A pointer to a zero-terminated array of port masks, each of which indicates a bit-mask of port readiness.  The run condition is considered <span style="font-style:italic">true</span> when any of the masks is true.  A mask is <span style="font-style:italic">true</span> when all indicated ports are ready (logical AND of port readiness).  A port is indicated by its bit being set (1 &lt;&lt; port_ordinal).  If the pointer itself is <span class="Code">NULL</span>, the run condition is always true.  A bit set for an unconnected port is ignored, thus the default run condition can be used with unconnected ports.</p>
          </td>
        </tr>
        <tr>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:67.3984px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">timeout</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:104.0032px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">bool</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:411.0688px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Indicates that the <span style="font-style:italic;font-weight:bold">usecs</span> member determines when enough time has passed to make the run condition true.  This value is used to enable or disable the timeout, without changing <span style="font-style:italic">usecs</span>.</p>
          </td>
        </tr>
        <tr>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:67.3984px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">usecs</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:104.0032px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">uint32_t</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:411.0688px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">If this amount of time has passed (in microseconds) since the run method was last <span style="font-style:italic">entered</span>, the run condition is true.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0"> </p>
    <p class="Body" dir="ltr">Thus the overall run condition is the logical OR of the <span class="Code">portMasks</span> and the timeout.  If the worker offers no <span class="Code">run</span> method in its RCCDispatch structure (see below), run conditions are ignored.  If the <span class="Code">portMasks</span> member is <span class="Code">NULL</span>, it indicates that no port readiness check is performed and thus the run condition is always true.  Typical combinations are:</p>
    <p class="caption" dir="ltr">Table <a href="#seqrefTable0">1</a>:  Run Condition Combinations</p>
    <table cellspacing="0" dir="ltr" id="Table6table" style="margin-top:0;margin-bottom:0;margin-left:0;margin-right:auto;width:629.73114px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td dir="ltr" style="border-top:1.0px solid #000001;border-bottom:4.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:73.4656px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-weight:bold;font-size:14.666667px">Shorthand</p>
          </td>
          <td dir="ltr" style="border-top:1.0px solid #000001;border-bottom:4.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:145.936px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-weight:bold;font-size:14.666667px">Port mask</p>
          </td>
          <td dir="ltr" style="border-top:1.0px solid #000001;border-bottom:4.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:55.1968px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-weight:bold;font-size:14.666667px">Timeout</p>
          </td>
          <td dir="ltr" style="border-top:1.0px solid #000001;border-bottom:4.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:289.5328px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-weight:bold;font-size:14.666667px">RunCondition Description</p>
          </td>
        </tr>
        <tr>
          <td dir="ltr" style="border-top:4.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:73.4656px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Always run</p>
          </td>
          <td dir="ltr" style="border-top:4.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:145.936px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">portMasks == NULL</p>
          </td>
          <td dir="ltr" style="border-top:4.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:55.1968px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">ignored</p>
          </td>
          <td dir="ltr" style="border-top:4.0px solid #000001;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:289.5328px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">the worker is always ready, no timeout</p>
          </td>
        </tr>
        <tr>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:73.4656px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Run when data ports are ready</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:145.936px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">portMasks != NULL</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:55.1968px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">False</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:289.5328px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Run condition is TRUE when any mask is true.  If there are no masks (portMasks[0] == 0), then the run condition is always false.</p>
          </td>
        </tr>
        <tr>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:73.4656px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Run when data ports are ready or timeout.</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:145.936px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">portMasks != NULL<br />and portMasks[0] != 0 </p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:55.1968px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">True</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:289.5328px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Run condition is TRUE when any mask is true OR if the timeout expires.  The timeout will take effect if time passes without the masks being satisfied.</p>
          </td>
        </tr>
        <tr>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:73.4656px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Periodic execution</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:145.936px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">portMasks != NULL<br />and portMasks[0] == 0</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:55.1968px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">True</p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;background-color:transparent;vertical-align:top;width:289.5328px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Since portMasks[0] == 0, port masks can never be true, thus this establishes period execution independent of port readiness.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0">The RunCondition structure is defined with public members as defined above, and several convenience constructors:</p>
    <p class="caption" dir="ltr">Table <a href="#seqrefTable0">1</a>:  RunCondition Constructors</p>
    <table cellspacing="0" dir="ltr" id="Table8table" style="margin-top:0;margin-bottom:0;margin-left:0;margin-right:auto;width:583.6704px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:223.6px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px"><span style="font-family:&apos;Courier New&apos;,serif;font-weight:bold">RunCondition()</span></p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:327.2704px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Specify the default run condition, no timeout, all connected ports must be ready</p>
          </td>
        </tr>
        <tr>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:223.6px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px"><span style="font-family:&apos;Courier New&apos;,serif;font-weight:bold">RunCondition</span><br /><span style="font-family:&apos;Courier New&apos;,serif;font-weight:bold"> (RCC::PortMask first, …)</span></p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:327.2704px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Specify a list of port masks as variable arguments that are a zero terminated list of masks</p>
          </td>
        </tr>
        <tr>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:223.6px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px"><span style="font-family:&apos;Courier New&apos;,serif;font-weight:bold">RunCondition</span><br /><span style="font-family:&apos;Courier New&apos;,serif;font-weight:bold"> (RCC::PortMask *masks,</span><br /><span style="font-family:&apos;Courier New&apos;,serif;font-weight:bold">  uint32_t usecs = 0,</span><br /><span style="font-family:&apos;Courier New&apos;,serif;font-weight:bold">  bool timeout = false)</span></p>
          </td>
          <td dir="ltr" style="border:1.0px solid #000001;padding-top:0;padding-bottom:0;padding-left:7.2000003px;padding-right:7.2000003px;vertical-align:top;width:327.2704px">
            <p class="Standard" dir="ltr" style="margin-left:0;margin-right:0;margin-top:6.6528006px;margin-bottom:5.328px;text-indent:0;text-align:left;font-size:14.666667px">Specify all fields, with defaults for timeout.  RunCondition(<span class="Code">NULL</span>) indicates: <span style="font-style:italic">always run</span>.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="Standard" dir="ltr" style="margin-top:0;margin-bottom:0"> </p>
    <h2 dir="ltr" id="toc54"><span class="SectionNumber">4.3 </span><a id="RefHeadingToc53301067000368"></a>Port Management Data Members and Methods</h2>
    <p class="Body" dir="ltr">This section describes port management methods, whereas the next section describes some members and methods used to separately manipulate buffers.  The current buffer at a port is in fact part of the port object, so methods on the current buffer are in fact methods on the port.  In the cases where buffer methods are used when the buffer is <span style="font-style:italic">not</span> the current buffer at some port, specific buffer methods are used, and those are described in the next section.</p>
    <p class="Body" dir="ltr">In the C language, port management methods are directly accessed function pointer members in the <span class="Code">RCCWorker</span> data structure, like all container methods.  Each has a <span class="Code">RCCPort</span> pointer as an argument.</p>
    <p class="Body" dir="ltr">In C++, each port is a member data object (of the worker object) whose name is the name of port (from the OCS).  Thus port management methods are methods on that object.</p>
    <p class="Body" dir="ltr">As an example, to <span style="font-style:italic">advance</span> a port in C, and optionally access the data of the now-current buffer, you would write:</p>
    <p class="Code" dir="ltr">RCCPort *inport = &amp;self-&gt;ports[MY_IN_PORT];<br /><br />if (self-&gt;container.advance(inport)) {<br />  void *p = inport-&gt;current.data;<br />  ...<br />}</p>
    <p class="Body" dir="ltr">In C++ this would be:</p>
    <p class="Code" dir="ltr">if (inport.advance()) {<br />  void *p = inport.data();<br />  ...<br />}</p>
    <p class="Body" dir="ltr">Note that in C++, the current buffer object is <span style="font-style:italic">inherited</span> by the port object, so the port data member is the object used to access the current buffer's <span class="Code">data()</span> method.</p>
    <h3 dir="ltr" id="toc55"><span class="SectionNumber">4.3.1 </span><a id="RefHeadingToc53321067000368"></a><span style="font-weight:bold">advance</span> — port method (C++), container method (C)</h3>
    <p class="Body" dir="ltr">This method releases the current buffer at a port, <span style="font-style:italic">and</span> requests that a new buffer be made available as the current buffer on the port.  This is a convenience/efficiency combination of the <span style="font-style:italic;font-weight:bold">release </span><span style="font-style:normal;font-weight:normal">(the current buffer)</span> and <span style="font-style:italic;font-weight:bold">request</span> (a new current buffer) methods described below.</p>
    <p class="Body" dir="ltr">An optional minimum size in bytes may be requested (0 is the default in C++, 0 can be supplied in C for no minimum size).</p>
    <h4 dir="ltr" id="toc56"><span class="SectionNumber">4.3.1.1 </span><a id="Toc2117810961111"></a>Synopsis</h4>
    <p class="Code" dir="ltr">RCCBoolean (*advance)(RCCPort *port, size_t minSize);  // C language<br />bool Port::advance(size_t minSize = 0);                // C++</p>
    <h4 dir="ltr" id="toc57"><span class="SectionNumber">4.3.1.2 </span>Returns</h4>
    <p class="Body" dir="ltr">A boolean value is returned indicating whether the <span style="font-style:italic;font-weight:bold">request</span> was immediately satisfied.</p>
    <h3 dir="ltr" id="toc58"><span class="SectionNumber">4.3.2 </span><a id="RefHeadingToc53421067000368"></a><span style="font-weight:bold">hasBuffer</span> — query a port for whether it has a current buffer-to-release</h3>
    <p class="Body" dir="ltr">This method returns whether a port has a current buffer.  If a port is already part of a Workers's run condition, and it is in every port mask of the run condition, it can be assumed to have a current buffer whenever the worker is run.  This is the case for 90% of all workers.  Thus this method is only needed and used when a port is not in the run condition, as might be the case for a port that received some exceptional condition message.</p>
    <p class="Body" dir="ltr">In C, this is a port structure member access.  In C++ it is a port method.</p>
    <h4 dir="ltr" id="toc59"><span class="SectionNumber">4.3.2.1 </span><a id="Toc2117810961147149150"></a>Synopsis</h4>
    <p class="Code" dir="ltr">Port-&gt;current.data != NULL        // C Language<br />bool RCCUserPort::hasBuffer();    // C++ Language</p>
    <h4 dir="ltr" id="toc60"><span class="SectionNumber">4.3.2.2 </span>Returns</h4>
    <p class="Body" dir="ltr">For C++, a bool value is returned indicating whether the port has a current buffer.</p>
    <h3 dir="ltr" id="toc61"><span class="SectionNumber">4.3.3 </span><a id="RefHeadingToc80371067000368"></a><span style="font-weight:bold">isConnected</span> — query a port for being connected</h3>
    <p class="Body" dir="ltr">This method returns whether a port is currently connected or not.  Component specifications (OCS) indicate whether each port of a component (and thus all workers) must be connected before workers are started or run.  A port is considered “optional” for a worker if the worker can tolerate the port <span style="font-style:italic">not</span> being connected.  If a port is <span style="font-style:italic">not</span> optional, the worker code can assume it is connected, and this method would not be needed or used.</p>
    <p class="Body" dir="ltr">In C, this is a Worker (self) structure member access.  In C++ it is a port method.</p>
    <h4 dir="ltr" id="toc62"><span class="SectionNumber">4.3.3.1 </span><a id="Toc2117810961147149"></a>Synopsis</h4>
    <p class="Code" dir="ltr">self-&gt;connectedPorts &amp; (1 &lt;&lt; PortOrdinal);  // C Language<br />bool RCCUserPort::isConnected();           // C++ Language</p>
    <h4 dir="ltr" id="toc63"><span class="SectionNumber">4.3.3.2 </span>Returns</h4>
    <p class="Body" dir="ltr">For C++, a bool value is returned indicating whether the port is connected.</p>
    <h3 dir="ltr" id="toc64"><span class="SectionNumber">4.3.4 </span><a id="RefHeadingToc53341067000368"></a><span style="font-weight:bold">request</span> — port method (C++), container method (C)</h3>
    <p class="Body" dir="ltr">This method <span style="font-style:italic">requests</span> that a new buffer be made available as the current buffer on a port.  If the port already has a current buffer, the request is considered satisfied.  This request indicates to the container that it should make a buffer available when possible.  Without an explicit request, the container may not make a buffer available since that would dedicate resources when they may not be needed.  An implicit <span style="font-style:italic;font-weight:bold">request</span> is made for all ports that are part of the current run condition.</p>
    <p class="Body" dir="ltr">An optional minimum size may be requested.</p>
    <p class="Body" dir="ltr">Note that this method is not used or needed when ports are <span style="font-style:italic">advanced</span>, only when buffers are being explicitly managed (e.g. released, etc.).</p>
    <h4 dir="ltr" id="toc65"><span class="SectionNumber">4.3.4.1 </span><a id="Toc211781096111"></a>Synopsis</h4>
    <p class="Code" dir="ltr">RCCBoolean (*request)(RCCPort *port, size_t minSize); // C Language<br />bool <span style="font-style:italic">Port</span>(size_t minSize = 0);                        //C++ language</p>
    <h4 dir="ltr" id="toc66"><span class="SectionNumber">4.3.4.2 </span>Returns</h4>
    <p class="Body" dir="ltr">A boolean value is returned indicating whether the request was immediately satisfied.</p>
    <h3 dir="ltr" id="toc67"><span class="SectionNumber">4.3.5 </span><a id="RefHeadingToc53361067000368"></a><span style="font-weight:bold">send</span> — send an input buffer on an output port</h3>
    <p class="Body" dir="ltr">This method sends an input buffer on an <span style="font-style:italic">output</span> port.  If the buffer is a current buffer for a port, this buffer will no longer be that port’s current buffer.  Buffer ownership passes back to the container.  This method is used to effect zero-copy transfer of a message from an input port to an output port.</p>
    <p class="Body" dir="ltr">C Language:  The operation and message length are supplied as arguments.</p>
    <p class="Body" dir="ltr">C++ Language:  The operation and message length are attributes of the buffer object and can be changed before it is sent using the <span class="Code">setOpCode</span> and/or <span class="Code">setLengt</span>h methods.</p>
    <p class="Body" dir="ltr">The sent buffer is either a current buffer of an input port or a buffer taken from an input port.</p>
    <h4 dir="ltr" id="toc68"><span class="SectionNumber">4.3.5.1 </span><a id="Toc21178109611"></a>Synopsis</h4>
    <p class="Code" dir="ltr">void (*send)(RCCPort* port,<br />             RCCBuffer* buffer,<br />             RCCOrdinal op,<br />             uint32_t length);           // C Language<br />void RCCPort::send(RCC::Buffer &amp;buffer); // C++ Language</p>
    <h4 dir="ltr" id="toc69"><span class="SectionNumber">4.3.5.2 </span>Returns</h4>
    <p class="Body" dir="ltr">Nothing.</p>
    <h3 dir="ltr" id="toc70"><span class="SectionNumber">4.3.6 </span><a id="RefHeadingToc53481067000368"></a><span style="font-weight:bold">setDefaultLength</span> — set the default message length at an output port</h3>
    <p class="Body" dir="ltr">This method sets the default message length in bytes for a port.  It is useful when messages produced at a port will always be the same size.</p>
    <p class="Body" dir="ltr">This method is used only when the message content is manipulated as a raw untyped buffer, rather than using the message content access methods described below.</p>
    <p class="Body" dir="ltr">The initial setting of the default message length is the length of the buffer.</p>
    <p class="Body" dir="ltr">This method is only available in C++.</p>
    <h4 dir="ltr" id="toc71"><span class="SectionNumber">4.3.6.1 </span><a id="Toc2117810961147149150151152153"></a>Synopsis</h4>
    <p class="Code" dir="ltr">void RCCUserPort::setdefaultLength(size_t length);  // C++ Language</p>
    <h4 dir="ltr" id="toc72"><span class="SectionNumber">4.3.6.2 </span>Returns</h4>
    <p class="Body" dir="ltr">Nothing.</p>
    <h3 dir="ltr" id="toc73"><span class="SectionNumber">4.3.7 </span><a id="RefHeadingToc53501067000368"></a><span style="font-weight:bold">setDefaultOpCode</span> — set the default opcode at an output port</h3>
    <p class="Body" dir="ltr">This method sets the default opcode for an output port.  It is useful when messages produced at a port will always have the same opcode.</p>
    <p class="Body" dir="ltr">The initial setting of the default opcode is zero (indicating the first operation specified in the associated protocol).</p>
    <p class="Body" dir="ltr">This method is only available in C++.</p>
    <h4 dir="ltr" id="toc74"><span class="SectionNumber">4.3.7.1 </span><a id="Toc2117810961147149150151152153154"></a>Synopsis</h4>
    <p class="Code" dir="ltr">void RCCUserPort::setDefaultOpCode(RCCOpCode opcode); // C++ only</p>
    <h4 dir="ltr" id="toc75"><span class="SectionNumber">4.3.7.2 </span>Returns</h4>
    <p class="Body" dir="ltr">Nothing.</p>
    <h3 dir="ltr" id="toc76"><span class="SectionNumber">4.3.8 </span><a id="RefHeading87121123303156"></a><span style="font-style:italic;font-weight:bold">take</span> — port method (C++), container method (C)</h3>
    <p class="Body" dir="ltr">This method <span style="font-style:italic">takes</span> the current buffer from a port, and optionally releases a previously taken buffer.  This method is used when workers need to maintain a history of one or more previous buffers while still requesting new buffers, e.g. for “sliding window” algorithms.</p>
    <p class="Body" dir="ltr">The optional buffer to be released is provided by a possibly <span class="Code">NULL</span> pointer to a buffer.  This buffer-to-release argument is a convenience feature of the API to allow cycling of buffers in a single call, e.g.:</p>
    <p class="Code" dir="ltr">class XyzWorker {<br />  RCCUserBuffer *m_prev;        // remember buff from previous run<br />  XyzWorker() : m_prev(NULL) {}<br />  void process_curr_and_prev(RCCUserBuffer *curr,<br />                             RCCUserBuffer *prev) {}<br />  run() {<br />    process_curr_and_prev(&amp;in, m_prev);<br />    m_prev = &amp;in.take(m_prev);<br />  }</p>
    <p class="Code" dir="ltr">}</p>
    <p class="Body" dir="ltr">In C, a container method has an <span class="Code">RCCPort</span> pointer and a possibly <span class="Code">NULL</span> buffer-to-release pointer as inputs, and a buffer pointer (thus a structure provided by the caller) where the taken buffer structure will be copied (not the data, just the structure).</p>
    <p class="Body" dir="ltr">In C++, <span style="font-style:italic;font-weight:bold">take</span> is a port method and the taken buffer is simply returned via a reference.</p>
    <p class="Body" dir="ltr">Ownership of the taken buffer is passed to the worker.  The current buffer now taken is no longer the current buffer.  This method is used when the worker needs access to more than one buffer at a time from an input port.  <span style="font-style:italic;font-weight:bold">Take</span> implies <span style="font-style:italic;font-weight:bold">request</span> (to get another current buffer).</p>
    <p class="Body" dir="ltr">It is an error to call this method when the port does not have a current buffer.</p>
    <h4 dir="ltr" id="toc77"><span class="SectionNumber">4.3.8.1 </span><a id="Toc21178109611111"></a>Synopsis</h4>
    <p class="Code" dir="ltr">void (*take)<br />  (RCCPort* port, RCCBuffer* releaseBuffer,<br />   RCCBuffer* takenBuffer);                // C language<br />RCCUserBuffer &amp;Port::take<br />  (RCCBuffer *release = NULL);             // C++ Language</p>
    <h4 dir="ltr" id="toc78"><span class="SectionNumber">4.3.8.2 </span>Returns</h4>
    <p class="Body" dir="ltr">Nothing is returned in C, since the taken buffer object is copied to the location supplied by the <span class="Code">takenBuffer</span> argument.  In C++, a reference to the taken buffer is returned.</p>
    <h2 dir="ltr" id="toc79"><span class="SectionNumber">4.4 </span><a id="RefHeadingToc53521067000368"></a>Buffer Management Data Members and Methods</h2>
    <p class="Standard" dir="ltr">This section describes methods that apply to buffers separate from ports.  As mentioned above, when a buffer is the current buffer at a port, the port object itself is normally used with these buffer methods.  In C++, the port object inherits the buffer object that is the current buffer.  In C, the current buffer is the <span class="Code">current</span> member of the RCCPort structure.</p>
    <p class="Standard" dir="ltr">When methods deal with “opCodes”, they are dealing with an ordinal for the message in a buffer, which identifies which type of message is in the buffer, among those defined by the protocol.  OpCode values are zero-origin in the order of how the operations are defined in the protocol (OPS) XML file.  Enumeration constants for the messages in a protocol are generated and are described in the code generation section below.</p>
    <h3 dir="ltr" id="toc80"><span class="SectionNumber">4.4.1 </span><a id="RefHeadingToc80391067000368"></a><span style="font-weight:bold">checkLength</span> — check size of the buffer</h3>
    <p class="Body" dir="ltr">Check that a message of a given size in bytes will fit into the buffer, usually associated with an output port.  An exception is thrown if the message will not fit.  This is useful when the worker is creating a variable length message and wants to ensure it will fit into the available buffer.  This check results in an error that the worker cannot check, and is intended to avoid unexpected buffer size mismatches, similar to the “assert” standard library function.</p>
    <p class="Body" dir="ltr"><a id="RefHeadingToc53461067000368"></a>This method is used only when the message content is manipulated as a raw untyped buffer, rather than using the message content access methods described below.</p>
    <p class="Body" dir="ltr">This method is only available in C++.</p>
    <h4 dir="ltr" id="toc81"><span class="SectionNumber">4.4.1.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">void RCCUserPort::checkLength(size_t neededSize);  // C++ Language</p>
    <h4 dir="ltr" id="toc82"><span class="SectionNumber">4.4.1.2 </span><a id="Toc2117810961147149150151152"></a>Returns</h4>
    <p class="Standard" dir="ltr">Nothing.</p>
    <h3 dir="ltr" id="toc83"><span class="SectionNumber">4.4.2 </span><a id="RefHeadingToc80411067000368"></a><span style="font-weight:bold">data</span> — access the raw contents of the buffer</h3>
    <p class="Body" dir="ltr">This method returns a pointer to the raw data in a buffer.  It is analogous to the “data” method in C++ STL container classes, although it has no type.</p>
    <h4 dir="ltr" id="toc84"><span class="SectionNumber">4.4.2.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">void *p = buffer-&gt;data;          // C Language<br />void *RCCUserBuffer::data();     // C++ Language</p>
    <h4 dir="ltr" id="toc85"><span class="SectionNumber">4.4.2.2 </span>Returns</h4>
    <p class="Standard" dir="ltr">The value returned is a void pointer to the contents of the buffer.</p>
    <h3 dir="ltr" id="toc86"><span class="SectionNumber">4.4.3 </span><a id="RefHeadingToc80431067000368"></a><span style="font-weight:bold">length</span> — retrieve the length of the message in a buffer – C++ only</h3>
    <p class="Body" dir="ltr">This method returns the number of bytes of the message in the buffer, which is typically an input buffer.  This is C++ only.  When using C, access to the length is via the current buffer at a port, e.g. <span class="Code">port-&gt;input.length</span>.</p>
    <h4 dir="ltr" id="toc87"><span class="SectionNumber">4.4.3.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">size_t RCCUserBuffer::length() const;   // C++ Language</p>
    <h4 dir="ltr" id="toc88"><span class="SectionNumber">4.4.3.2 </span>Returns</h4>
    <p class="Standard" dir="ltr">The method returns the length in bytes of the message in the buffer.</p>
    <h3 dir="ltr" id="toc89"><span class="SectionNumber">4.4.4 </span><a id="RefHeadingToc80451067000368"></a><span style="font-weight:bold">maxLength</span> — retrieve the maximum available space in the buffer.</h3>
    <p class="Body" dir="ltr">This method allows the worker to retrieve the actual size of the buffer, typically used on output buffers.</p>
    <h4 dir="ltr" id="toc90"><span class="SectionNumber">4.4.4.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">size_t len = buffer-&gt;maxLength;           // C language<br />size_t RCCUserBuffer::maxLength() const;  // C++ language</p>
    <h4 dir="ltr" id="toc91"><span class="SectionNumber">4.4.4.2 </span>Returns</h4>
    <p class="Standard" dir="ltr"><a id="Toc21178109611472"></a>The size of the buffer in bytes is returned.</p>
    <h3 dir="ltr" id="toc92"><span class="SectionNumber">4.4.5 </span><a id="RefHeadingToc80471067000368"></a><span style="font-weight:bold">opCode</span> — retrieve the opCode of the message in a buffer — C++ only</h3>
    <p class="Body" dir="ltr">This method retrieves the <span style="font-style:italic">opCode</span> of the message in the buffer, typically an input buffer.    This is C++ only.  When using C, access to the opCode is via the current buffer at a port, e.g. <span class="Code">port-&gt;input.u.operation</span></p>
    <h4 dir="ltr" id="toc93"><span class="SectionNumber">4.4.5.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">RCCOpCode RCCUserBuffer::opCode() const;     // C++ Language</p>
    <h4 dir="ltr" id="toc94"><span class="SectionNumber">4.4.5.2 </span>Returns</h4>
    <p class="Standard" dir="ltr"><a id="Toc21178109611474"></a>This method returns the opCode of the message in the buffer.</p>
    <h3 dir="ltr" id="toc95"><span class="SectionNumber">4.4.6 </span><a id="RefHeadingToc80491067000368"></a><span style="font-weight:bold">release</span> — release a buffer</h3>
    <p class="Body" dir="ltr">This method releases a buffer for reuse.  If the buffer is the current buffer for a port, it will no longer be the current buffer.  Buffer ownership passes back to the container.  Buffers for a port <span style="font-style:italic;font-weight:bold">must be released in the order obtained</span>, per port.  Note that this method is not used or needed when ports are “advanced”, only when buffers are obtained from a port using other port management functions such as <span style="font-style:italic;font-weight:bold">take</span>.</p>
    <p class="Body" dir="ltr">Releasing a current buffer does not imply requesting a new current buffer:  that request must be explicit.  A release without a request might be useful if a worker is entering a mode where it no longer needs any more data from an input port or it no longer needs to send any more buffers on an output port.</p>
    <p class="Body" dir="ltr">In C, this is a container method.  In C++ it is a buffer method.</p>
    <h4 dir="ltr" id="toc96"><span class="SectionNumber">4.4.6.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">void (*release)(RCCBuffer* buffer);  // C Language<br />void RCCUserBuffer::release();       // C++ Language</p>
    <h4 dir="ltr" id="toc97"><span class="SectionNumber">4.4.6.2 </span>Returns</h4>
    <p class="Standard" dir="ltr"><a id="Toc2117810961147"></a>Nothing.</p>
    <h3 dir="ltr" id="toc98"><span class="SectionNumber">4.4.7 </span><a id="RefHeadingToc80511067000368"></a><span style="font-weight:bold">setInfo</span> — set the metadata associated with a buffer — C++ only</h3>
    <p class="Body" dir="ltr">This method is a convenient combination of setting both the <span style="font-style:italic;font-weight:bold">opCode</span> and the <span style="font-style:italic;font-weight:bold">length</span> of the message in a buffer.  It is typically used on output buffers, when both opCode and length are being set at the same time.</p>
    <h4 dir="ltr" id="toc99"><span class="SectionNumber">4.4.7.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">void RCCUserBuffer::setInfo(RCCOpCode op, size_t length);  // C++</p>
    <h4 dir="ltr" id="toc100"><span class="SectionNumber">4.4.7.2 </span>Returns</h4>
    <p class="Standard" dir="ltr">Nothing.</p>
    <h3 dir="ltr" id="toc101"><span class="SectionNumber">4.4.8 </span><a id="RefHeadingToc80531067000368"></a><span style="font-weight:bold">setLength</span> — set the length of the message in a buffer — C++ only</h3>
    <p class="Body" dir="ltr">This method sets the length in bytes of the message in a buffer.</p>
    <p class="Body" dir="ltr">This is C++ only.  When using C, access to the length of an output buffer is via the current buffer at a port, e.g. <span class="Code">port-&gt;output.u.length</span>, or via the <span class="Code">send</span> port method.</p>
    <h4 dir="ltr" id="toc102"><span class="SectionNumber">4.4.8.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">void RCCUserBuffer::setLength(size_t length);       // C++ Language</p>
    <h4 dir="ltr" id="toc103"><span class="SectionNumber">4.4.8.2 </span>Returns</h4>
    <p class="Standard" dir="ltr">Nothing.</p>
    <h3 dir="ltr" id="toc104"><span class="SectionNumber">4.4.9 </span><a id="RefHeadingToc80551067000368"></a><span style="font-weight:bold">setOpCode</span> — set the opCode for the message in a buffer — C++ only</h3>
    <p class="Body" dir="ltr">This method sets the opCode of the message in a buffer.</p>
    <p class="Body" dir="ltr">This is C++ only.  When using C, access to the opCode of an output buffer is via the current buffer at a port, e.g. <span class="Code">port-&gt;output.u.operation</span>, or via the <span class="Code">send</span> port method.</p>
    <h4 dir="ltr" id="toc105"><span class="SectionNumber">4.4.9.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">void RCCUserBuffer::setOpCode(RCCOpCode op);      // C++ Language</p>
    <h4 dir="ltr" id="toc106"><span class="SectionNumber">4.4.9.2 </span>Returns</h4>
    <p class="Standard" dir="ltr">Nothing.</p>
    <h3 dir="ltr" id="toc107"><span class="SectionNumber">4.4.10 </span><a id="RefHeadingToc80571067000368"></a><span style="font-weight:bold">topLength</span> — retrieve the size of the single sequence in a message — C++ only</h3>
    <p class="Body" dir="ltr" style="margin-left:0;margin-right:0;margin-top:7.6703997px;margin-bottom:5.7408px;background-color:transparent;text-indent:0;text-align:left">This method only applies to input buffers that contain messages consisting of a single sequence argument (as defined in the protocol).  It retrieves the length, <span style="font-style:italic">in elements</span>, of that sequence.  The <span class="Code">elemSize</span> argument to <span class="Code">topLength</span> is the size in bytes of the elements of the sequence in the buffer.  An error check is made to ensure that the size of the message in bytes is divisible by the <span class="Code">elemSize</span> value provided.</p>
    <p class="Body" dir="ltr" style="margin-left:0;margin-right:0;margin-top:7.6703997px;margin-bottom:5.7408px;background-color:transparent;text-indent:0;text-align:left">Normally, sequence lengths are retrieved using the message/operation access methods described below in the “accessing the contents of messages” section.  However, when message contents are accessed as an untyped raw buffer, this method allows the worker to retrieve the number of elements of a given size in the message without the container knowing the data type of the message.  It performs the size conversion and error check in one API.</p>
    <p class="Body" dir="ltr"><a id="RefHeadingToc53441067000368"></a>The message must consist of exactly one sequence for this method to be valid.  Sequences can have zero elements.</p>
    <p class="Body" dir="ltr">This method is only available in C++.</p>
    <h4 dir="ltr" id="toc108"><span class="SectionNumber">4.4.10.1 </span>Synopsis</h4>
    <p class="Code" dir="ltr">size_t RCCUserBuffer::topLength(size_t elemSize);  // C++ Language</p>
    <h4 dir="ltr" id="toc109"><span class="SectionNumber">4.4.10.2 </span><a id="Toc2117810961147149150151"></a>Returns</h4>
    <p class="Body" dir="ltr">For C++, this method returns a size_t value indicating the number of sequence elements in the message, given the size of elements known by the worker.</p>
    <h2 dir="ltr" id="toc110"><span class="SectionNumber">4.5 </span><a id="RefHeadingToc80591067000368"></a>Accessing the Contents of Messages</h2>
    <p class="Body" dir="ltr">The sections above described methods used to access the content and metadata (length and opCode) of messages in buffers.  Those methods operate independent of the actual types of the data in the messages, and put the burden of accessing typed data on the worker code.  I.e. the worker code would have to convert (cast) the pointer types and manually deal with the multiple data types for the arguments in a message.</p>
    <p class="Body" dir="ltr">Accessing the individual arguments (fields) in the payload for an input message (or setting the fields of an output message) is facilitated differently in C vs. C++.</p>
    <p class="Body" dir="ltr">In C, a data structure is generated that can be overlaid on the input buffer to access all fields up to and including the first variable length field (sequence or string).  In fact, for each port, a union of data structures is defined for all the possible messages that may be in a buffer for a port.  These structures are described in the code generation section below, but the basic pattern is, for a port PXY, with protocol PR1 with operations Op1 and Op2, there is a union of structures like this:</p>
    <p class="Code" dir="ltr">union PxyOperations {<br />  struct Op1 {<br />    ... fields in the message for Op1 messages ...<br />  } op1;<br />  struct Op2 {<br />    ... fields in the message for Op2 messages ...<br />  } op2;<br />};</p>
    <p class="Body" dir="ltr">Note that the data types are camel-cased, while the union members are lower cased.  So, in C you can access messages based on opCode like this:</p>
    <p class="Code" dir="ltr">union PxyOperations *up = port-&gt;current.data;<br />switch (port-&gt;input.u.operation) {<br />case Pr1_Op1:<br />  use up-&gt;op1 as message structure; break;<br />case Pr1_Op1:<br />  use up-&gt;op2 as message structure; break;<br />}</p>
    <p class="Body" dir="ltr">The major limitation of this mechanism for C language workers is that the structures only cover the fields of messages up to and including the first variable length field.  After that, the worker code must manually access the remaining fields using pointer arithmetic and casting.  This covers most protocols used in simple systems, but is painful when the limitation is exceeded.</p>
    <p class="Body" dir="ltr">For C++ workers, it is easier and does not have the same limitations.  Each port is a data member of the worker object whose name is the port's name in the OCS, and each such port data member has an accessor for the information for each possible message in the port's protocol.  Finally, each field of the payload for each operation also has an accessor.  Thus, for the example above, accessing the Arg1 field of the Op1 operation on the protocol for port “in”, would simply be:</p>
    <p class="Code" dir="ltr">in.Op1().Arg1()</p>
    <p class="Body" dir="ltr">These C++ message access methods are const and return a value for input ports, and return a non-const reference for output ports.</p>
    <p class="Body" dir="ltr">When the argument type is a sequence or array, the field accessor returns a reference to an object that has two methods that act just like the C++ STL <span class="Code">vector</span> collection type:</p>
    <p class="Code" dir="ltr">&lt;arg-data-type&gt; *data() const;<br />size_t size() const;</p>
    <p class="Body" dir="ltr">Thus if “Arg1” in the above example was a sequence of unsigned shorts, you could access this field with:</p>
    <p class="Code" dir="ltr">uint16_t *vals = in.Op1().Arg1().data();<br />size_t nvals = in.Op1().Arg1().size();</p>
    <p class="Body" dir="ltr">For output ports, the <span class="Code">data()</span> accessor for sequences or arrays is not <span class="Code">const</span>,  and there are two other methods that also act like the C++ STL vector type:</p>
    <p class="Code" dir="ltr">&lt;arg-data-type&gt; *data();<br />size_t capacity() const;<br />void resize(size_t size);</p>
    <h2 dir="ltr" id="toc111"><span class="SectionNumber">4.6 </span><a id="RefHeadingToc80611067000368"></a>Property Access Notifications</h2>
    <p class="Body" dir="ltr">Workers sometimes need dynamic notifications when properties are written or read by control software.  i.e. the worker would like to run some code just before a property read returns (to potentially create the correct value to read) or after a property write (to cause some other side affect of the new written value).</p>
    <p class="Body" dir="ltr">These capabilities are enabled when the property in the OWD (not OCS) has the <span class="Code">readSync</span> or <span class="Code">writeSync</span> attributes set to true.  The <span class="Code">readSync</span> attribute being true indicates that the worker would like to run some code <span style="font-style:italic">before</span> the value of the property is passed back to the control software reading the property.  The <span class="Code">writeSync</span> attribute being true indicates that the worker would like to run some code <span style="font-style:italic">after</span> a new value is written, in order to implement some side effect when the property value is changed.</p>
    <p class="Body" dir="ltr">An example of using <span class="Code">readSync</span> is when the value should be computed based on some other dynamic condition, e.g. reading a real-time or physical sensor value.  An example of <span class="Code">writeSync</span> is when writing a new value should atomically affect some other state of the worker.</p>
    <p class="Body" dir="ltr">Using the C language, the notifications are made via the calls to the beforeQuery (for any <span class="Code">readSync</span> property) and afterConfigure (for any <span class="Code">writeSync</span>) control methods.  The worker cannot know which properties were written or read, but at least knows that only readSync or writeSync properties could have caused these notifications.</p>
    <p class="Body" dir="ltr">In C++, when these attributes are set, the skeleton includes empty implementations of notification methods for each such property that the worker author can fill out.  For <span class="Code">readSync</span> properties a worker class member function called <span class="Code">&lt;property&gt;_written</span> must be present.  For <span class="Code">writeSync</span> properties, a member function named <span class="Code">&lt;property&gt;_read</span> must be present.  Both notification member functions take no arguments and return <span class="Code">RCCResult</span>, which allows these functions to indicate errors.  A <span class="Code">readSync</span> notification function can set the property value locally and then return, and that value will then be conveyed back to control software.  A <span class="Code">writeSync</span> notification is called after the new value has been written, so the function can locally access the new value when it is called.</p>
    <h2 dir="ltr" id="toc112"><span class="SectionNumber">4.7 </span><a id="RefHeadingToc80631067000368"></a>Controlling Slave Workers from Proxies (C++ only)</h2>
    <p class="Body" dir="ltr">When the RCC OWD indicates that an RCC worker is a proxy for another (slave) worker, it gives the proxy worker convenient access to the slave's control interface (for control operations and property accesses).  The primary reason for proxy workers is to standardize and/or make more user-friendly, the control of the underlying slave worker. The slave worker is frequently device-specific, having esoteric properties or configuration requirements that normal users should not be concerned with.</p>
    <p class="Body" dir="ltr">As a concrete example, a “device worker” that controls an RF front-end device typically wants to expose the native functionality of the device in a high performance and/or resource-conservative fashion. However, most application users would only want a subset of those options that are uniform across all RF front-ends they might use.</p>
    <p class="Body" dir="ltr">Delegating the normalization of the control/configuration interface to the RCC proxy worker can expose to users a high level configuration interface with complex property data types as required.  This relieves this burden from the embedded device worker which may be in an environment (e.g. on a small FPGA) that makes this normalization difficult and/or expensive.  Furthermore, this enables the device worker to faithfully and simply implement the device's native control interface for direct use by lower level applications that want to exploit lower level device-specific features, without cluttering up the proxy's more generic interface.</p>
    <p class="Body" dir="ltr">A proxy worker can provides a higher level control interface, and also can act as the software module that encapsulates specialized configuration and control sequencing of the device, without requiring the application to use special APIs in a custom application. The proxy worker is “just another component” in the application that is fully described in XML.</p>
    <p class="Body" dir="ltr">Inside the code of a proxy, the slave worker is accessed by using the <span class="Code">slave</span> data member of the worker's class object.  This data member has member functions for the control operations on the slave (except <span class="Code">initialize</span> and <span class="Code">release</span>).  For each readable property of the slave worker, a <span class="Code">get_&lt;property-name&gt;</span> member function is available to retrieve the current value of the slave's property, and for each writable property of the slave worker a <span class="Code">set_&lt;property-name&gt;</span> is available.  If the property is an array, both the <span class="Code">get</span> and <span class="Code">set</span> member functions for that property (of the <span class="Code">slave</span> data member) have arguments specifying the index in each dimension.  The <span class="Code">set</span> functions then have a value argument for the new value of the property.  Here are some examples, usable  in any proxy worker member function (e.g. <span class="Code">start</span>, or <span class="Code">run</span>):</p>
    <p class="Code" dir="ltr">uint8_t x = slave.get_byteregA();<br />slave.set_byteregA(3);<br />x = slave.get_arrayprop(2);<br />slave.set_arrayprop(3, x);<br />x = slave.get_array2d(1, 2);<br />slave.set_array2d(1, 2, x);<br />slave.stop();<br />slave.start();</p>
    <p class="Standard" dir="ltr">There is currently no way to get or set whole array values, only individual elements.</p>
    <h2 dir="ltr" id="toc113"><span class="SectionNumber">4.8 </span><a id="RefHeading159862129872468"></a>Worker Dispatch Structures — C Language only</h2>
    <p class="Body" dir="ltr">When workers are loaded for execution by the container, the container finds the worker by getting access to its <span class="Code">RCCDispatch</span> structure.  Thus the only external symbol the worker code needs to define is the symbol that holds this structure.</p>
    <p class="Body" dir="ltr">The code generator generates this initialization in the skeleton file, and it can be further customized by the worker author.</p>
    <h3 dir="ltr" id="toc114"><span class="SectionNumber">4.8.1 </span><a id="RefHeading159882129872468"></a>RCCDispatch Structure Type</h3>
    <p class="Body" dir="ltr">This type is the “dispatch table” for the operations of the C-language worker interface.  It represents the functionality a worker provides to a container when it is loaded.  The container must gain access to this structure when the worker is loaded and executed.  All members are statically initialized by the worker source code.  This structure also contains other descriptive information required by the container to use the worker.</p>
    <p class="Body" dir="ltr">The RCC C-language skeleton will contain a default initialization for this structure based on what is in the OWD, which looks like (for worker <span class="Code">xyz.rcc</span>):</p>
    <p class="Code" dir="ltr">XYZ_METHOD_DECLARATIONS;<br />RCCDispatch bias = {<br />  /* insert any custom initializations here */<br />  XYZ_DISPATCH<br />};</p>
    <p class="Body" dir="ltr">Any non-default member initializations must be placed after the XYZ_DISPATCH line, and be specified using the named member syntax, e.g.:</p>
    <p class="Code" dir="ltr">RCCDispatch bias = {<br />  /* insert any custom initializations here */<br />  XYZ_DISPATCH<br />  .memSize = 16*sizeof(MyData),<br />  .runCondition = &amp;myRunCondition<br />};</p>
    <p class="Body" dir="ltr">The members of this structure that may be set this way are defined in the following table:</p>
    <p class="caption" dir="ltr">Table <a href="#seqrefTable0">1</a>:  Members of the RCCDispatch structure — C-language only</p>
    <table cellspacing="0" dir="ltr" id="Table7table" style="margin-top:0;margin-bottom:0;width:624.0px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td style="border-top:1.0px solid #000000;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:123.531204px">
            <p class="TableHeading" dir="ltr" style="font-size:14.666667px">RCCDispatch Member </p>
          </td>
          <td style="border-top:1.0px solid #000000;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:142.00162px">
            <p class="TableHeading" dir="ltr" style="font-size:14.666667px">Member Data Type</p>
          </td>
          <td style="border:1.0px solid #000000;padding:3.6671999px;vertical-align:top;width:332.464px">
            <p class="TableHeading" dir="ltr" style="font-size:14.666667px">Member Description</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:123.531204px">
            <p class="TableCode" dir="ltr" style="font-size:14.666667px">memSizes</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:142.00162px">
            <p class="TableCode" dir="ltr" style="font-size:14.666667px">uint32_t*</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;padding:3.6671999px;vertical-align:top;width:332.464px">
            <p class="TableContents" dir="ltr" style="font-size:14.666667px">This zero-terminated array of memory sizes indicates allocations required by the worker.  Multiple allocations allow the worker to avoid aggregating its requirements in a single allocation.  May be NULL, when no allocations are required.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:123.531204px">
            <p class="TableCode" dir="ltr" style="font-size:14.666667px">runCondition</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:142.00162px">
            <p class="TableCode" dir="ltr" style="font-size:14.666667px">RCCRunCondition*</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;padding:3.6671999px;vertical-align:top;width:332.464px">
            <p class="TableContents" dir="ltr" style="font-size:14.666667px">The initial run condition used.  If this pointer is NULL it implies a run condition of all connected ports being ready and no timeout.  If there are no ports, the default is no port masks to check, indicating always ready to run.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:123.531204px">
            <p class="TableCode" dir="ltr" style="font-size:14.666667px">optionalPorts</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:142.00162px">
            <p class="TableCode" dir="ltr" style="font-size:14.666667px">RCCPortMask</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;padding:3.6671999px;vertical-align:top;width:332.464px">
            <p class="TableContents" dir="ltr" style="font-size:14.666667px">A mask indicating ports that may be unconnected.  The default, 0, means all ports must be connected before the worker is started.</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:123.531204px">
            <p class="TableCode" dir="ltr" style="font-size:14.666667px">memSize</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:none;padding:3.6671999px;vertical-align:top;width:142.00162px">
            <p class="TableCode" dir="ltr" style="font-size:14.666667px">size_t</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;padding:3.6671999px;vertical-align:top;width:332.464px">
            <p class="TableContents" dir="ltr" style="font-size:14.666667px">This size indicates a required memory allocation.  May be zero, indicating no allocation is required.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="Body" dir="ltr"> </p>
    <h1 dir="ltr" id="toc115"><span class="SectionNumber">5 </span><a id="Toc270018444"></a><a id="RefHeading10618140039662"></a>Code Generation for RCC Workers</h1>
    <p class="Body" dir="ltr">The worker's OCS and OWD are used to generate two code files, the header and the skeleton.  The header file, which should not be edited, contains type definitions customized for the worker.  This file is named <span class="Code">&lt;workername&gt;_Worker.h</span> (in the C language) or <span class="Code">&lt;workername&gt;-worker.hh</span> (in the C++ language), <span style="font-style:italic">without</span> capitalizing the worker name.  It is placed in the “<span class="Code">gen</span>” subdirectory of the worker's directory.</p>
    <p class="Body" dir="ltr">The skeleton file is a small file that is generated as the basis for writing the worker's execution code (e.g. the run method implementation).  It relies heavily on the generated header file and thus is as small as possible to avoid code changes when the OCS or OWD is changed.  The skeleton is generated in the <span class="Code">gen</span> subdirectory with the name <span class="Code">&lt;workername&gt;-skel.c</span> (C language) or <span class="Code">&lt;workername&gt;-skel.cc</span> (C++ language).  It is also copied into the worker's directory as <span class="Code">&lt;workername&gt;.c</span> or <span class="Code">&lt;workername&gt;.cc</span> and <span style="font-style:italic">this</span> copy is what should be edited to add the worker's functional code.  The <span class="Code">&lt;workername&gt;-skel.c</span> file should not be edited, but left for reference to see exactly what the code generator produced.</p>
    <p class="Body" dir="ltr">In the descriptions below, names in angle brackets are names specific to the worker, as found in the worker’s OCS and OWD XML files.</p>
    <h2 dir="ltr" id="toc116"><span class="SectionNumber">5.1 </span><a id="RefHeadingToc80651067000368"></a>Namespace Management</h2>
    <p class="Body" dir="ltr">To avoid name space collisions, some rules are used by the code generator when creating the header and skeleton files.</p>
    <p class="Body" dir="ltr">In the C++ language, generated data types in the header are placed in a namespace whose name is: <span class="Code">&lt;worker&gt;WorkerTypes</span>.  In the actual worker source file, this namespace is normally imported, via the “<span class="Code">using namespace</span>” directive.  The actual worker derived class is a class in the global namespace whose name is <span class="Code">&lt;worker&gt;Worker</span>.  The dispatch entry point, which is necessarily a C external symbol, has the worker's name as its external symbol.</p>
    <p class="Body" dir="ltr">In the C language, the worker's dispatch table is given the external symbol name of the worker, and all methods are declared <span class="Code">static</span>.  All data types use the capitalized worker name as a prefix and all constants and macros use the upper cased worker name followed by an underscore as a prefix.</p>
    <p class="Body" dir="ltr"> </p>
    <h2 dir="ltr" id="toc117"><span class="SectionNumber">5.2 </span><a id="RefHeadingToc80671067000368"></a>Generated Data Types</h2>
    <p class="Body" dir="ltr">Various data types are generated in the header file for the worker.  They are :</p>
    <ul class="listlevel1WWNum32">
      <li>
        <p class="ListBullet" dir="ltr">Port name enumeration</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">Property data structure</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">Opcode enumeration for each protocol used</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">Opcode enumeration for each port (C only)</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">Message structures (C only)</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">Worker base class (C++ only)</p>
      </li>
    </ul>
    <h3 dir="ltr" id="toc118"><span class="SectionNumber">5.2.1 </span><a id="RefHeading10620140039662"></a><a id="Toc270018445"></a>The enumeration constants for the worker’s ports</h3>
    <p class="Body" dir="ltr">An enumeration type is generated in the header file which defines constants for the ordinal of each port, of the form <span class="Code">&lt;worker&gt;_&lt;port&gt;</span>, all upper case.  These ordinals can be used when creating port masks for run conditions, or, for C workers, indexing into the port array in the <span class="Code">RCCWorker</span> structure.</p>
    <h3 dir="ltr" id="toc119"><span class="SectionNumber">5.2.2 </span><a id="Toc270018446"></a><a id="RefHeading10622140039662"></a>The properties structure type</h3>
    <p class="Body" dir="ltr">This is the generated structure definition that reflects the properties declared for the worker in its OCS and OWD XML files.  Each member of this structure has the data type corresponding to the property’s description in the OWD and OCS XML files.  Members for properties that are <span style="font-style:italic">not</span> declared <span class="Code">volatile</span> in XML are <span class="Code">const</span> in this structure, indicating that the worker is not expected to change their values.</p>
    <p class="Body" dir="ltr">The standard name of the struct type (typedef name in C) is <span class="Code">XyzProperties</span> where “Xyz” is the <span style="font-style:italic">capitalized</span> worker implementation name.</p>
    <p class="Body" dir="ltr">Properties which are sequences are generated as a structure containing a <span class="Code">uint32_t</span> member whose name is <span class="Code">length</span>, holding the number of elements in the sequence.  Padding may be added before and after the length member to achieve the required alignment of this length field as well as the sequence data following it.  The member name of the structure is the property name.  The members of the structure are <span class="Code">length</span> and <span class="Code">data</span>.  The data member is a C array whose length is the SequenceLength attribute from the Property element in the XML.  Remember that for properties (as opposed to protocols), sequences and strings must have a maximum size (i.e. be bounded).</p>
    <p class="Body" dir="ltr">Struct properties have structure tags the same name as the property name, preceded by the worker name.</p>
    <p class="Body" dir="ltr">The names of the integer types for properties:  <span class="Code">short, ushort, long, ulong, longlong, ulonglong, uchar, char</span> are mapped to the respective <span class="Code">&lt;stdint.h&gt;</span> types:  <span class="Code">int16_t, uint16_t, int32_t, uint32_t,  int64_t, uint64_t, uint8_t</span>.  The OCS/OWD <span class="Code">char</span> type is mapped to the <span class="Code">RCCChar</span> type, which is normally mapped to the basic C/C++ <span class="Code">char</span> type and it is assumed to be signed.</p>
    <p class="Body" dir="ltr">The names of the non-integer types for simple properties are the OCS-defined type names capitalized and prefixed with “RCC”:  e.g. <span class="Code">RCCBoolean</span>, <span class="Code">RCCChar</span>, <span class="Code">RCCFloat</span>, <span class="Code">RCCDouble</span>.</p>
    <p class="Body" dir="ltr">Properties that are string properties are <span class="Code">RCCChar </span>arrays whose size is one more than the StringLength attribute of that string property in the Property element, and the values are null terminated strings.</p>
    <h3 dir="ltr" id="toc120"><span class="SectionNumber">5.2.3 </span><a id="RefHeading87141123303156"></a>Structures for Message Payloads (C only)</h3>
    <p class="Body" dir="ltr">For each port a union type is defined for all possible messages at that port.  Members of the union type are generated structures for each possible message in that protocol.  The name of the union type is <span class="Code">&lt;Port&gt;Operations</span>, with port name capitalized.</p>
    <p class="Body" dir="ltr">For each message type specified in the protocol, a structure is defined whose type name is the capitalized name of the operation in the protocol, and whose member name is the lower cased name.  Arguments to the operation in the protocol are structure members of that per-operation structure.  The structure layout is as defined above for the property structure, with the exception that variable size elements (strings and sequences) are allowed, and are sized as [1], with no further members generated after the first variable sized member.</p>
    <p class="Body" dir="ltr">The structure generated is padded and packed.  This means padding members are explicitly inserted to ensure all types are aligned on their own boundaries.  It also means that the compiler is told to “pack” the structure,  Given the insertion of padding, the “packing” simply means that there is no padding at the end of the structure to achieve any alignment.  Thus the struct definition should not be used in any other context where this lack of overall size alignment is required (i.e. an array of such structures).</p>
    <p class="Body" dir="ltr"><span style="font-size:16.0px">There is one special exception for messages that consist entirely of one sequence of fixed length elements:  the length of the sequence is implied by the overall message length as specified by the “length” value of buffers at input and output ports, and </span><span style="font-style:italic;font-size:16.0px">not</span><span style="font-size:16.0px"> represented by inserting a uint32_t value in the message buffer/structure.  In all other cases (not-fixed sequence elements, or more than one top level data argument in the message), sequences in messages are represented by a struct containing </span><span class="Code">length</span><span style="font-size:16.0px"> and </span><span class="Code">data</span><span style="font-size:16.0px"> members.</span></p>
    <p class="Body" dir="ltr">For example, for a port named “in”, with a protocol whose first operation was “sampledata”, and whose first argument was “sample” - a sequence of Ulonglong values, the worker’s custom port union would look like:</p>
    <p class="Code" dir="ltr"><span style="font-weight:bold;font-size:14.666667px">union InOperations {</span><br /><span style="font-weight:bold;font-size:14.666667px">  // Structure for the 'sampledata' operation on port 'in'</span><br /><span style="font-weight:bold;font-size:14.666667px">  struct __attribute__ ((__packed__)) Sampledata {</span><br /><span style="font-weight:bold;font-size:14.666667px">    uint64_t sample[1];</span><br /><span style="font-weight:bold;font-size:14.666667px">  } sampledata;<br />};</span></p>
    <h3 dir="ltr" id="toc121"><span class="SectionNumber">5.2.4 </span><a id="RefHeadingToc16848576511445"></a>Worker Base Class (C++ only)</h3>
    <p class="Body" dir="ltr">For C++ workers, a base class is generated in the header file that is inherited by a derived class in the skeleton.  The base class is generated to maximize the code generated in the header file and minimize the code generated in the skeleton.</p>
    <p class="Body" dir="ltr">The worker base class is generated to support all the documented features described above, including access to properties, and contain pure virtual member function declarations for all the member functions required to be implemented in the derived class.  The details of the code generation are implementation defined and subject to change.</p>
    <h1 dir="ltr" id="toc122" style="page-break-before:always"><span class="SectionNumber">6 </span><a id="Toc211783575"></a><a id="RefHeading10774474132946"></a><a id="Toc211780960"></a><a id="Toc211780989"></a><a id="Toc211781109"></a><a id="Toc211781789"></a>RCC Local Services</h1>
    <p class="Body" dir="ltr">Local service APIs support RCC workers running in a container.  Containers are required to supply them, and workers are constrained to use only them (other than the worker-to-container entry points defined above).  The RCC local services are defined as a small subset of the POSIX and ISO-C runtime libraries.</p>
    <p class="Body" dir="ltr">These local services APIs represent a minimal environment required of embedded systems.  If other APIs are used, there is no guarantee they will be available in all containers.</p>
    <h2 dir="ltr" id="toc123"><span class="SectionNumber">6.1 </span><a id="Toc211783577"></a><a id="RefHeading10778474132946"></a><a id="Toc211780962"></a><a id="Toc211780991"></a><a id="Toc211781111"></a><a id="Toc211781791"></a>RCC Local Services AEP as a small subset of POSIX and ISO-C.</h2>
    <p class="Body" dir="ltr">The local services available for RCC workers are typical runtime support functions without the functions that require heavy weight OS support.  All I/O is excluded since portable RCC workers should be performing all I/O via the OpenCPI data plane ports.  Some containers in fact allow many more functions to be called from a worker, but that makes such workers non-portable.</p>
    <p class="Body" dir="ltr">The POSIX Minimal Realtime System Profile (PSE51) from the IEEE Std 1003.13TM-2003 standard is used as the superset of functionality that is reduced (with subtractions) to the RCC local services available functions.  Using this subset requires setting the _POSIX_AEP_RT_MINIMAL_C_SOURCE feature test macro to the value 200312L during compilation.</p>
    <p class="Body" dir="ltr">The PSE51 specification defines POSIX.1 units of functionality in its table 6-1.  This RCC Local Services AEP (application environment profile) removes these units of functionality from that table:</p>
    <ul class="listlevel1WWNum32">
      <li>
        <p class="ListBullet" dir="ltr">POSIX_DEVICE_IO</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">POSIX_FILE_LOCKING</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">POSIX_SIGNALS</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">XSI_THREAD_MUTEX_EXT</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">XSI_THREADS_EXT</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">POSIX_THREADS_BASE</p>
      </li>
    </ul>
    <p class="Body" dir="ltr">The retained units of functionality, and their defined symbols and functions are:</p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,serif;font-style:italic">POSIX_C_LANG_JUMP: longjmp(), setjmp();<!-- For these lists I wasn't sure what style you would prefer – I made them body – change to style you desire
Arlan Pool
September 25, 2014 10:13 PM --></span></p>
    <p class="Body" dir="ltr" style="font-family:Arial,serif;font-style:italic">POSIX_C_LANG_SUPPORT: abs(), asctime(), asctime_r(), atof(), atoi(), atol(), atoll(), bsearch(), calloc(), ctime(), ctime_r(), difftime(), div(), feclearexcept(), fegetenv(),                                                                                                                                                                                                                                                                      fegetexceptflag(), fegetround(), feholdexcept(), feraiseexcept(), fesetenv(), fesetexceptflag(), fesetround(), fetestexcept(), feupdateenv(), free(), gmtime(), gmtime_r(), imaxabs(), imaxdiv(), isalnum(), isalpha(), isblank(), iscntrl(), isdigit(), isgraph(), islower(), isprint(), ispunct(), isspace(), isupper(), isxdigit(), labs(), ldiv(), llabs(), lldiv(), localeconv(), localtime(), localtime_r(), malloc(), memchr(), memcmp(), memcpy(), memmove(), memset(), mktime(), qsort(), rand(), rand_r(), realloc(), setlocale(), snprintf(), sprintf(), srand(), sscanf(), strcat(), strchr(), strcmp(), strcoll(), strcpy(), strcspn(), strerror(), strerror_r(), strftime(), strlen(), strncat(), strncmp(), strncpy(), strpbrk(), strrchr(), strspn(), strstr(), strtod(), strtof(), strtoimax(), strtok(), strtok_r(), strtol(), strtold(), strtoll(), strtoul(), strtoull(), strtoumax(), strxfrm(), time(), tolower(), toupper(), tzname, tzset(), va_arg(), va_copy(), va_end(), va_start(), vsnprintf(), vsprintf(), vsscanf();</p>
    <p class="Body" dir="ltr" style="font-family:Arial,serif;font-style:italic">POSIX_SINGLE_PROCESS: confstr(), environ, errno, getenv(), setenv(), sysconf(), uname(), unsetenv();</p>
    <p class="Body" dir="ltr">The philosophy of the base RCC profile AEP subset is to allow functions that are simply libraries (rather than OS services), but remove services that could conflict with the lean container execution model in that profile.  This basically leaves the typical ANSI-C (or ISO C99) runtime library (without I/O) – most DSPs have this available, even those environments without multithreading.</p>
    <h1 dir="ltr" id="toc124"><span class="SectionNumber">7 </span><a id="RefHeading119011972665394"></a>Summary of OpenCPI RCC authoring model</h1>
    <ul class="listlevel1WWNum32">
      <li>
        <p class="ListBullet" dir="ltr"><span style="font-size:16.0px;background-color:transparent">RCC workers are written to implement the Worker interface, called by the container, and optionally use the Container interface, called by the worker.  The container interface is a set of defined container functions.</span></p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">RCC workers may call the local services functions defined in the RCC AEP.</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">RCC workers use data structures and ordinals as defined in the metadata code generation section (which will be automatically generated from the OWD).</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">When not the default, the RCC worker authors must make the following implementation-specific metadata available to the build process (see OWD above) for compiling/linking/loading worker implementation binaries on a given platform:</p>
      </li>
    </ul>
    <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
      <li>
        <p class="ListBullet2" dir="ltr">Implementation name</p>
      </li>
      <li>
        <p class="ListBullet2" dir="ltr">Which control operations are implemented</p>
      </li>
      <li>
        <p class="ListBullet2" dir="ltr">Which properties require <span style="font-family:&apos;Courier New&apos;">beforeQuery</span> or <span style="font-family:&apos;Courier New&apos;">afterConfigure</span> notification </p>
      </li>
      <li>
        <p class="ListBullet2" dir="ltr">Static memory allocation requirements of the implementation code</p>
      </li>
      <li>
        <p class="ListBullet2" dir="ltr">Minimum number of buffers required at each port (default is one)</p>
      </li>
    </ul>
    <ul class="listlevel1WWNum32">
      <li>
        <p class="ListBullet" dir="ltr">The information in the OWD is used to drive the build process and the code generation process for the RCC worker’s header and skeleton files.</p>
      </li>
    </ul>
    <h2 dir="ltr" id="toc125"><span class="SectionNumber">7.1 </span><a id="Toc211783582"></a><a id="RefHeading10780474132946"></a><a id="Toc211780971"></a><a id="Toc211780997"></a><a id="Toc211781125"></a><a id="Toc211781797"></a><a id="Toc211783583"></a><a id="Toc211780970"></a><a id="Toc211780996"></a><a id="Toc211781124"></a><a id="Toc211781796"></a>Worker code example</h2>
    <p class="Body" dir="ltr">Here is a simple example of a C-language “Xyz” worker whose:</p>
    <ul class="listlevel1WWNum32">
      <li>
        <p class="ListBullet" dir="ltr">initial run condition was the default (condition == NULL, usecs == 0, run when all ports are ready, no timeout),</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">initialize, release and test methods are empty</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">one input port (0) with interface XyxIn (only oneways)  and one output port (1) XyzOut (only oneways)</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">one oneway IDL interface operation Op1 on input (i.e. can ignore “operation”), which is an array of 100 “shorts”.</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">one oneway IDL interface operation Op2 on output</p>
      </li>
      <li>
        <p class="ListBullet" dir="ltr">one simple property, called center_frequency, of type float.</p>
      </li>
    </ul>
    <p class="Body" dir="ltr">The worker would have automatically generated types and structures like this (based on OCS and OWD), and put in a file called “Xyz_Worker.h”:</p>
    <p class="Code" dir="ltr"><span style="font-family:Courier,serif;font-size:13.333334px">#include “RCC_Worker.h”</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">typedef struct {	/* structure for defined properties /</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCCFloat center_frequency;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">} XyzProperties;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">typedef struct {	// structure for message for operation</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	int16_t ishorts[100];</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">} XyzInOp1;</span><br /><br /><span style="font-family:Courier,serif;font-size:13.333334px">typedef struct {	// structure for message for operation</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	int16_t oshorts[100];</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">} XyzOutOp2;</span><br /><br /><span style="font-family:Courier,serif;font-size:13.333334px">typedef enum { // port ordinals</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	XYZ_IN,</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	XYZ_OUT</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">} XyzPort;</span><br /><br /><span style="font-family:Courier,serif;font-size:13.333334px">typedef enum { // operation ordinals</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	XYZ_OUT_OP2</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">} XyzOutOperation;</span><br /><br /><span style="font-family:Courier,serif;font-size:13.333334px">typedef enum { // operation ordinals</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	XYZ_IN_OP1</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">} XyzInOperation;</span></p>
    <p class="Body" dir="ltr">The actual code for the worker would look like this:</p>
    <p class="Code" dir="ltr"><span style="font-family:Courier,serif;font-size:13.333334px">#include “Xyz_Worker.h”</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Define the initialize method, setting output operation to be a */</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* constant, since it is the only one.*/</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">static RCCResult</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">initialize(RCCWorker *w) {</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	w-&gt;ports[XYZ_OUT].output.u.operation = XYZ_OUT_OP2;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	return RCC_OK;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">}</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Define run method to call the “compute” function, reading from */</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* input buffer, writing to output, applying current value of the */</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* “center frequency” property.*/</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">static RCCResult</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">run(RCCWorker *w, RCCBoolean timedout, RCCBoolean *newRunCondition)</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">{</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	XyzProperties *p = w-&gt;properties;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	XyzInOp1     *in = w-&gt;ports[XYZ_IN].current.data;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	XyzOutOp2   *out = w-&gt;ports[XYZ_OUT].current.data;</span><br /><br /><span style="font-family:Courier,serif;font-size:13.333334px">	</span><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Do computation based in ishorts, and frequency put results */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	</span><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* in oshorts.  Extern is here simply for readability.</span><span style="font-family:Courier,serif;font-size:13.333334px"> */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	extern void compute(int16_t *, int16_t *, float);</span><br /><br /><span style="font-family:Courier,serif;font-size:13.333334px">	compute(in-&gt;ishorts, out-&gt;oshorts, p-&gt;center_frequency);</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	</span><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Ask container to get new input and output buffers *</span><span style="font-family:Courier,serif;font-style:italic;font-weight:bold;font-size:13.333334px">/</span><br /><span style="font-family:Courier,serif;font-weight:bold;font-size:13.333334px">	</span><span style="font-family:Courier,serif;font-size:13.333334px">return RCC_ADVANCE;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">}</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Initialize dispatch table for container, in a global symbol </span><span style="font-family:Courier,serif;font-style:italic;font-weight:bold;font-size:13.333334px">/</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">RCCDispatch Xyz = {</span><br /><span style="font-family:Courier,serif;font-style:italic;font-weight:bold;font-size:13.333334px">	/*</span><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px"> Consistency checking attributes */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCC_VERSION, 1, 1, sizeof(XyzProperties), RCC_NULL, RCC_FALSE,</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Methods */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	initialize, RCC_NULL, RCC_NULL, RCC_NULL, RCC_NULL, RCC_NULL,</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCC_NULL, run,</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Default run condition */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCC_NULL</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">};</span></p>
    <p class="Body" dir="ltr">Other than the compute function, the above example compiles to use less than 120 bytes on a Pentium processor.</p>
    <p class="Body" dir="ltr" style="font-family:Arial,serif;font-size:16.0px">A simple non-preemptive single-threaded container implementation would have a loop, testing run conditions, and calling run methods.  A more complex environment might run workers in different threads for purposes of time preemption, prioritization, etc.  This model allows a variety of container execution models while keeping the worker model simple.</p>
    <p class="Body" dir="ltr">So, on each execution, the worker sees the status of all I/O ports, and can read from current input buffers, and write to current output buffers.  It must return to get new buffers, after specifying whether buffers are consumed or filled during the execution.</p>
    <p class="Body" dir="ltr">This simple execution environment can be easily implemented in full-function GPP environments, providing a test environment and a migration path to more minimal embedded environments such as a single-threaded environment with no real operating system.</p>
    <h4 dir="ltr" id="toc126"><span class="SectionNumber">7.1.1.1 </span><a id="Toc211781127"></a>Worker implementation using input callback</h4>
    <p class="Body" dir="ltr">This illustrates an input-based callback function that has a sequential coding style in which the worker blocks on the two-way remote call until the response is received and processing can continue.  No extra threads are used.</p>
    <p class="Body" dir="ltr">The code is:</p>
    <p class="Code" dir="ltr"><span style="font-family:Courier,serif;font-size:13.333334px">#include "Xyt_Worker.h"</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Define the input port callback method to call the local "compute"</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px"> * function, reading from input buffer, applying the value of the</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px"> * "center frequency" property, followed by two way  "process"</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px"> * operation, finally writing the result to output port XYT_OUT */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px"> static RCCResult</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">computeInput(RCCWorker *this, RCCPort *inPort, RCCResult reason)</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">{</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	XytProperties *p = this-&gt;properties;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCCContainer *c = &amp;this-&gt;container;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	XytInOp1 *data = inPort-&gt;current.data;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCCPort *computeOut = &amp;this-&gt;ports[XYT_COMPUTE_REQUEST_OUT],</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	        *computeIn = &amp;this-&gt;ports[XYT_COMPUTE_REPLY_IN],</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	        *otherOut = &amp;this-&gt;ports[XYT_OUT];</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	extern void compute(int16_t *, int16_t *, float);</span><br /><br /><span style="font-family:Courier,serif;font-size:13.333334px">	if (reason != RCC_OK)</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		return RCC_FATAL;</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Do computation based in ishorts, and frequency; put results</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	 * back in ishorts, in place */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	compute(data-&gt;ishorts, data-&gt;ishorts, p-&gt;center_frequency);</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Call Process operation on "uses" port: buffer ownership passes</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	 * back to container. */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	c-&gt;send(computeOut, &amp;inPort-&gt;current, XYT_COMPUTE_PROCESS,</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	        inPort-&gt;input.length);</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Wait until response received (or 100 msec error timeout). </span><span style="font-family:Courier,serif;font-style:italic;font-weight:bold;font-size:13.333334px">/</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	c-&gt;wait(computeIn, 100, 100000);</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	if (computeIn-&gt;input.u.exception == RCC_NO_EXCEPTION)</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		c-&gt;send(otherOut, &amp;computeIn-&gt;current, XYT_OUT_OP2,</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		        computeIn-&gt;input.length);</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	else</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		c-&gt;release(&amp;computeIn-&gt;current);</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	return RCC_OK;</span><br /><span style="font-family:Courier,serif;font-weight:bold;font-size:13.333334px">}</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Define the initialize method to perform worker initialization. */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">static RCCResult</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">initialize(RCCWorker *this)</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">{</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">  this-&gt;ports[XYT_IN].callBack = computeInput;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">  return RCC_OK;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">}</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Initialize dispatch table provided to container. We only need the</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px"> * initialize method to register the callback.  No run method needed */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">RCCDispatch</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">Xyt = {</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Consistency checking attributes */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCC_VERSION, 1, 1, sizeof(XytProperties), RCC_NULL, RCC_TRUE,</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Methods */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	initialize</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* all remaining members zero/NULL */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">};</span></p>
    <p class="Body" dir="ltr">Other than the compute function, the above example compiles to use less than 300 bytes on a Pentium processor.</p>
    <h4 dir="ltr" id="toc127"><span class="SectionNumber">7.1.1.2 </span><a id="Toc211781128"></a>Worker implementation using the using state-machine style</h4>
    <p class="Body" dir="ltr">This illustrates a finite state machine coding style in a worker that maintains an internal state to simulate blocking on a two-way remote call until the response is received and processing can continue.</p>
    <p class="Code" dir="ltr"><span style="font-family:Courier,serif;font-size:13.333334px">#include "Xyt_Worker.h"</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Define two different run conditions to represent two states */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">static uint32_t</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">  state1Ports[] = {1 &lt;&lt; XYT_IN, 0},</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">  state2Ports[] = {1 &lt;&lt; XYT_COMPUTE_REPLY_IN, 0};</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">static RCCRunCondition</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">  awaitingInput = {state1Ports},</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">  awaitingResponse = {state2Ports};</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Define start method, set run condition, which is also state. </span><span style="font-family:Courier,serif;font-style:italic;font-weight:bold;font-size:13.333334px">/</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">static RCCResult</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">initialize(RCCWorker this)</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">{</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	this-&gt;runCondition = &amp;awaitingInput;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	return RCC_OK;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">}</span><br /><span style="font-family:Courier,serif;font-style:italic;font-weight:bold;font-size:13.333334px">/</span><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">* Define run method to call the local "compute" function</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px"> * reading from input buffer, applying current value of the</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px"> * “center frequency” property, followed by remote two way</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px"> * “process” operation, finally writing result to output. */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">static RCCResult</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">run(RCCWorker *this, RCCBoolean timedout, RCCBoolean *newRunCondition)</span><br /><span style="font-family:Courier,serif;font-weight:bold;font-size:13.333334px">{</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCCContainer *c = &amp;this-&gt;container;</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Use run condition as state indicator */ </span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	if (this-&gt;runCondition == &amp;awaitingInput) {</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		RCCPort</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">			*inPort       = &amp;this-&gt;ports[XYT_IN],</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">			*computeOut   = &amp;this-&gt;ports[XYT_COMPUTE_REQUEST_OUT];</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		XytInOp1 *in     = inPort-&gt;current.data;</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		XytProperties *p = this-&gt;properties;</span><br /><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">		/* do some computation based in ishorts, and frequency;</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">		 * put results back in same buffer (in-place) */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		extern void compute(int16_t *, int16_t *, float);</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		compute(in-&gt;ishorts, in-&gt;ishorts, p-&gt;center_frequency);</span><br /><br /><span style="font-family:Courier,serif;font-size:13.333334px">		/* Call Process op on user port - buffer ownership passes back</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		 * to container.  Input port is advanced by taking buffer away</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		 * from it. *</span><span style="font-family:Courier,serif;font-weight:bold;font-size:13.333334px">/</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		c-&gt;send(computeOut, &amp;inPort-&gt;current, XYT_COMPUTE_PROCESS,</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		        inPort-&gt;input.length);	/* length of message */				this-&gt;runCondition = &amp;awaitingResponse; /* update state */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	} else {</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		RCCPort *computeIn = &amp;this-&gt;ports[XYT_COMPUTE_REPLY_IN];</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		RCCPort *otherOut = &amp;this-&gt;ports[XYT_OUT];</span><br /><br /><span style="font-family:Courier,serif;font-size:13.333334px">		if (computeIn-&gt;input.u.exception == 0)</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">			c-&gt;send(otherOut, &amp;computeIn-&gt;current, XYT_OUT_OP2,</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">			        computeIn-&gt;input.length);</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		else</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">			c-&gt;advance(computeIn, 0);</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">		this-&gt;runCondition = &amp;awaitingInput; /* update state */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	}</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	*newRunCondition = RCC_TRUE; /* to container: new runcondition </span><span style="font-family:Courier,serif;font-weight:bold;font-size:13.333334px">/</span><br /><span style="font-family:Courier,serif;font-weight:bold;font-size:13.333334px">	</span><span style="font-family:Courier,serif;font-size:13.333334px">return RCC_OK;</span><br /><span style="font-family:Courier,serif;font-weight:bold;font-size:13.333334px">}</span></p>
    <p class="Code" dir="ltr"><span style="font-family:Courier,serif;font-style:italic;font-weight:bold;font-size:13.333334px">/* continued on next page */</span><br /></p>
    <p class="Code" dir="ltr" style="page-break-before:always"><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">/* Initialize dispatch table provided to container. We only need the</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px"> * initialize method to register the callback.  No run method needed */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">RCCDispatch Xyt = {</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Consistency checking attributes */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCC_VERSION, 1, 1, sizeof(XytProperties), RCC_NULL, RCC_FALSE,</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* Methods */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	initialize, RCC_NULL, RCC_NULL, RCC_NULL, RCC_NULL, RCC_NULL,</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">	RCC_NULL, run,</span><br /><span style="font-family:Courier,serif;font-style:italic;font-size:13.333334px">	/* all remaining members zero/NULL */</span><br /><span style="font-family:Courier,serif;font-size:13.333334px">};</span></p>
    <p class="Body" dir="ltr">Other than the compute function, the above example compiles to use less than 330 bytes on a Pentium processor.</p>
    <h1 dir="ltr" id="toc128"><span class="SectionNumber">8 </span><a id="RefHeading119071972665394"></a>Glossary</h1>
    <p class="Body" dir="ltr"><span style="font-weight:bold">Configuration Properties</span> – Named values associated with a worker that may be read or written by the control application and/or the worker. Their values indicate or control aspects of the worker’s operation. Reading and writing these property values may or may not have side effects on the operation of the worker. Configuration properties with side effects can be used for custom worker control. Each worker may have its own, possibly unique, set of configuration properties.  Some properties come from the OCS: they are common to all implementations that implement that OCS.  Other properties can be added in the OWD that are specific to that particular worker implementation.</p>
    <p class="Body" dir="ltr"><span style="font-weight:bold">Container</span> – An OpenCPI infrastructure element that “contains”, manages and executes a set of application workers.  Logically, the container “surrounds” the workers, mediating all interactions between the worker and the rest of the system.</p>
    <p class="Body" dir="ltr"><span style="font-family:Arial,serif;font-weight:bold;font-size:16.0px">Worker Attribute</span><span style="font-family:Arial,serif;font-size:16.0px"> – An attribute related to a particular implementation (design) of a worker, for one of its interfaces.  I.e. one that is not necessarily common across a set of implementations of the same high level component definition (OCS).</span></p>
    <p class="Body" dir="ltr" style="font-size:16.0px"><span style="font-weight:bold">Worker</span> – A concrete implementation (and possibly runtime instance) of a component, generally existing within a container.  A worker is implemented consistent with its OWD.</p>
    <h1 dir="ltr" id="toc129"><span class="SectionNumber">9 </span><a id="Toc270018463"></a><a id="RefHeadingToc16850576511445"></a>References</h1>
    <table cellspacing="0" dir="ltr" id="Table17table" style="margin-top:0;margin-bottom:0;margin-left:-7.2000003px;margin-right:auto;width:583.19995px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;background-color:#e0e0e0;vertical-align:top;width:34.6624px">
            <p class="TableHeading" dir="ltr">ID</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;background-color:#e0e0e0;vertical-align:top;width:544.5376px">
            <p class="TableHeading" dir="ltr">Link/URL</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:34.6624px">
            <p class="TableContents" dir="ltr">1</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:544.5376px">
            <p class="TableContents" dir="ltr">OpenCPI Component Development Guide: <br /><a class="Internet20link" href="https://github.com/opencpi/opencpi/raw/master/doc/OpenCPI_CDK_Reference.pdf">https://github.com/opencpi/opencpi/raw/master/doc/</a><a class="Internet20link" href="https://github.com/opencpi/opencpi/raw/master/doc/OpenCPI_CDK_Reference.pdf">pdf/</a><a class="Internet20link" href="https://github.com/opencpi/opencpi/raw/master/doc/OpenCPI_CDK_Reference.pdf">OpenCPI_</a><a class="Internet20link" href="https://github.com/opencpi/opencpi/raw/master/doc/OpenCPI_CDK_Reference.pdf">Component</a><a class="Internet20link" href="https://github.com/opencpi/opencpi/raw/master/doc/OpenCPI_CDK_Reference.pdf">_</a><a class="Internet20link" href="https://github.com/opencpi/opencpi/raw/master/doc/OpenCPI_CDK_Reference.pdf">Development</a><a class="Internet20link" href="https://github.com/opencpi/opencpi/raw/master/doc/OpenCPI_CDK_Reference.pdf">.pdf</a></p>
          </td>
        </tr>
      </tbody>
    </table>
    <h1 dir="ltr" id="toc130" style="font-family:&apos;Times New Roman&apos;,serif;font-weight:bold;font-size:18.666668px"><span class="SectionNumber">10 </span><a id="RefHeading10658140039662"></a><a id="Toc270018464"></a>List of Abbreviations and Acronyms</h1>
    <table cellspacing="0" dir="ltr" id="Table18table" style="margin-top:0;margin-bottom:0;margin-left:-7.2000003px;margin-right:auto;width:583.19995px;border-collapse:separate;border-spacing:0;table-layout:fixed">
      <tbody>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">ACI</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Application Control Interface</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">ADC</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Analog-to-Digital Converter</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">API</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Application Programming Interface</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">CBD</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Component-Based Development</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">CDK</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Component Developer’s Kit</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">CORBA</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Common Object Request Broker Architecture</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">COTS</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Commercial Off The Shelf</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">DAC</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Digital to Analog Converter</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">DDS</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Data Distribution Service</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">DMA</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Direct Memory Access</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">DoD</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Department of Defense</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">DSP</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Digital Signal Processor</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">FGM</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Fine-Grained Multicore</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">FPGA</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Field Programmable Gate Array</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">GBE</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">GigaBit Ethernet</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">GPGPU</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">General Purpose computing on a Graphics Processing Unit</p>
          </td>
        </tr>
        <tr>
          <td style="border-top:none;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">GPP</p>
          </td>
          <td style="border-top:none;border-bottom:1.0px solid #000001;border-left:1.0px solid #000001;border-right:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">General Purpose Processor</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">GPU</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Graphics Processing Unit</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">HCI</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Human/Computer Interface</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">HDL</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Hardware Description Language</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">OpenCL</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Open Computing Language</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">OpenCPI</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Open-Source Component Portability Infrastructure</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">OpenCV</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Open Computer Vision library</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">RDMA</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Remote Direct Memory Access</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">SCA</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Software Communications Architecture</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">SOW</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Statement of Work</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">SWaP</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Size, Weight and Power</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">VHDL</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">VHSIC Hardware Description Language</p>
          </td>
        </tr>
        <tr>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:117.664px">
            <p class="TableContents" dir="ltr">XML</p>
          </td>
          <td style="border:1.0px solid #000001;padding:0;vertical-align:top;width:461.53598px">
            <p class="TableContents" dir="ltr">Extensible Markup Language</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="Textbody" dir="ltr"> </p>
    <p class="Body" dir="ltr"> </p>
  </body>
</html>
