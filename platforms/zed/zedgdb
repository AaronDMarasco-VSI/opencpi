#!/bin/bash
main=$1
shift
addr=$2
shift
exec $OCPI_CROSS_BUILD_BIN_DIR/$OCPI_CROSS_HOST-gdb \
  $OCPI_CDK_DIR/bin/$OCPI_TARGET_HOST/$main \
  -iex "set sysroot $OCPI_CDK_DIR/platforms/zed/release/uramdisk/root" \
  -iex "set solib-search-path  $OCPI_CDK_DIR/platforms/zed:$OCPI_CDK_DIR/lib/$OCPI_TARGET_HOST:$OCPI_CDK_DIR/lib/components/rcc/$OCPI_TARGET_HOST" \
  -iex "target remote ${addr}:1234" \
  -iex "set directories $OCPI_BASE_DIR/runtime/hdl/src" \
  $*
