# Copyright (c) 2009 Mercury Federal Systems.
#
# This file is part of OpenCPI.
#
# OpenCPI is free software: you can redistribute it and/or modify
# it under the terms of the GNU Lesser General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# OpenCPI is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public License
# along with OpenCPI.  If not, see <http://www.gnu.org/licenses/>.

ALLDEFS += NEED_MAIN

TRANSFER_DRIVERS +=  $(TX_TRANSFER_LIBS)

ALLINC += $(WCI_API_EXPORTS) $(CPIOS_EXPORTS) \
 $(UTIL_EXPORTS) \
 $(DATA_TRANSFER_EXPORTS) $(DATA_TRANSPORT_EXPORTS) \
 $(CONTAINER_EXPORTS) $(PPP_INC)

ifeq ($(BUILDSHAREDLIBRARIES),0)
ifeq ($(CROSS_HOST),ppc86xx-linux)
DYNOBJS += ../../../cp289_container/$(OUTDIR)/CpiContainerDriver.obj \
	$(CPIDIR)/core/dataplane/rdma_drivers/$(OUTDIR)/DtPioXfer.obj \
	$(CPIDIR)/core/dataplane/rdma_drivers/$(OUTDIR)/DtPCIPioXfer.obj \
	$(CPIDIR)/core/dataplane/rdma_drivers/$(OUTDIR)/DtSocketsXfer.obj \
	$(CPIDIR)/adapt/drivers/rdma/$(OUTDIR)/DtPPP_PioXfer.obj \
	$(CPIDIR)/adapt/drivers/rdma/$(OUTDIR)/DtPPP_DMAXfer.obj
else
DYNOBJS += ../../../cp289_container/$(OUTDIR)/CpiContainerDriver.obj \
	$(CPIDIR)/core/dataplane/rdma_drivers/$(OUTDIR)/DtPCIPioXfer.obj \
	$(CPIDIR)/core/dataplane/rdma_drivers/$(OUTDIR)/DtPioXfer.obj

#	$(CPIDIR)/core/dataplane/rdma_drivers/$(OUTDIR)/DtSocketsXfer.obj
endif
endif

ALLLIBS += $(CP289_CONTAINER_LIBS) $(CONTAINER_LIBS) $(DATA_TRANSPORT_LIBS) \
 $(DATA_TRANSFER_LIBS)  $(WCI_API_LIBS) $(TRANSFER_DRIVERS) \
 $(UTIL_LIBS) $(LOGGER_LIBS) $(CPIOS_LIBS)

#FOR TEST ONLY !!
ifeq ($(CROSS_HOST),ppc86xx-linux)
ALLLIBS += $(CPIDIR)/adapt/drivers/rdma/rdma $(UTIL_LIBS) $(LOGGER_LIBS) $(CPIOS_LIBS)

SYSLIBS += $(PPP_LIB)/rose

endif





